<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Hyrox Tracker">
  <title>Hyrox Training Logger</title>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    * {
      -webkit-tap-highlight-color: transparent;
      -webkit-touch-callout: none;
    }
    body {
      overscroll-behavior: none;
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
    }
  </style>
</head>
<body style="margin:0;padding:0;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto',sans-serif;background-color:#000000">
<div id="root"></div>
<script type="text/babel">
const {useState,useEffect}=React;
const Icon=({d,s=24})=><svg width={s} height={s} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" dangerouslySetInnerHTML={{__html:d}}/>;
const Calendar=({s=24})=><Icon d='<rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/>' s={s}/>;
const Plus=({s=24})=><Icon d='<line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/>' s={s}/>;
const User=({s=24})=><Icon d='<path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/>' s={s}/>;
const CheckCircle=({s=24})=><Icon d='<path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/>' s={s}/>;
const Flame=({s=24})=><Icon d='<path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"/>' s={s}/>;
const TrendingUp=({s=24})=><Icon d='<polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/><polyline points="17 6 23 6 23 12"/>' s={s}/>;
const Clock=({s=24})=><Icon d='<circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/>' s={s}/>;

function WorkoutCard({day,isComplete,onToggle}){
  const[showDetails,setShowDetails]=useState(false);
  return <div className={`bg-white border-2 rounded-lg p-4 transition ${isComplete?'shadow-lg':'border-gray-200'}`} style={isComplete?{borderColor:'#FF4500'}:{}}>
    <div className="flex items-start gap-4">
      <button onClick={onToggle} className={`flex-shrink-0 mt-1 w-6 h-6 rounded border-2 flex items-center justify-center transition text-white ${isComplete?'border-transparent':'border-gray-300 hover:border-gray-400'}`} style={isComplete?{backgroundColor:'#FF4500'}:{}}>{isComplete&&<CheckCircle s={20}/>}</button>
      <div className="flex-1">
        <div className="flex items-start justify-between mb-2">
          <div><div className="font-bold text-lg text-black">{day.day}</div><div className="text-sm text-gray-600">{day.type} - {day.focus}</div></div>
          <div className="px-3 py-1 rounded-full text-xs font-semibold text-white" style={{backgroundColor:day.type==='Running'?'#FF4500':day.type==='Strength'?'#000000':day.type==='Hybrid'?'#FF4500':'#666666'}}>{day.type}</div>
        </div>
        <div className="text-sm text-gray-700 mb-2">{day.detail}</div>
        <button onClick={()=>setShowDetails(!showDetails)} className="text-xs font-semibold" style={{color:'#FF4500'}}>{showDetails?'▼ Hide Details':'▶ Show Full Workout'}</button>
        {showDetails&&<div className="mt-3 p-3 bg-gray-50 border border-gray-200 rounded text-sm text-black whitespace-pre-line">{day.specifics}</div>}
      </div>
    </div>
  </div>
}

function App(){
const[tab,setTab]=useState('plan');
const[user,setUser]=useState('user1');
const[plan,setPlan]=useState('mixed');
const[workouts,setWorkouts]=useState([]);
const[comp,setComp]=useState({});
const[week,setWeek]=useState(1);
const[showLogForm,setShowLogForm]=useState(false);
const[nutritionLog,setNutritionLog]=useState([]);
const[showNutritionForm,setShowNutritionForm]=useState(false);
const[showTargetForm,setShowTargetForm]=useState(false);
const[nutritionTargets,setNutritionTargets]=useState({calories:2100,protein:130,carbs:225,fats:65});
const[currentMeal,setCurrentMeal]=useState({date:new Date().toISOString().split('T')[0],mealName:'',calories:'',protein:'',carbs:'',fats:''});
const[currentWorkout,setCurrentWorkout]=useState({date:new Date().toISOString().split('T')[0],type:'',duration:'',notes:''});

useEffect(()=>{try{const w=localStorage.getItem('hyroxWorkouts');if(w)setWorkouts(JSON.parse(w));const c=localStorage.getItem('completedSessions');if(c)setComp(JSON.parse(c));const n=localStorage.getItem('nutritionLog');if(n)setNutritionLog(JSON.parse(n));const t=localStorage.getItem('nutritionTargets');if(t)setNutritionTargets(JSON.parse(t));}catch(e){}},[]); useEffect(()=>{try{localStorage.setItem('hyroxWorkouts',JSON.stringify(workouts));}catch(e){}},

[workouts]);
useEffect(()=>{try{localStorage.setItem('completedSessions',JSON.stringify(comp));}catch(e){}},

[comp]);
useEffect(()=>{try{localStorage.setItem('nutritionLog',JSON.stringify(nutritionLog));}catch(e){}},

[nutritionLog]);
useEffect(()=>{try{localStorage.setItem('nutritionTargets',JSON.stringify(nutritionTargets));}catch(e){}},

[nutritionTargets]);

const mixedWeek=[
{day:'Monday',type:'Strength',focus:'Lower Body',detail:'Sled Push/Pull, Squats, Lunges',specifics:'10min warm-up (row/bike)\n\nWEEK 1-2: Sled Push 5x8 @ 70kg (womens)\nWEEK 1-2: Sled Pull 5x8 @ 55kg (womens)\nWEEK 3-4: Sled Push 5x6 @ 102kg (70% mens)\nWEEK 3-4: Sled Pull 5x6 @ 84kg (70% mens)\nWEEK 5-6: Sled Push 6x4 @ 152kg (mens) MAX SPEED\nWEEK 5-6: Sled Pull 6x4 @ 103kg (mens) explosive\nWEEK 7: Sled Push 2x2 @ 152kg technique only\nWEEK 7: Sled Pull 2x2 @ 103kg technique only\n\nGoblet Squats: 4x10 (20kg)\nRDLs: 3x10 (40-50kg)\nWalking Lunges: 3x12\nSandbag Lunges: 4x100m (20kg weeks 3+)\nCore: 3-4x :45 plank + hollow rocks'},
{day:'Tuesday',type:'Running',focus:'Easy Aerobic',detail:'40-60min conversational pace',specifics:'WEEK 1-2: 40-50min @ 6:00-6:30/km (5.7-6.2 mph / 9.2-10.0 km/h)\nWEEK 3-4: 45-55min @ 6:00-6:30/km + 6x100m strides\nWEEK 5-6: 50-60min @ 6:00-6:30/km\nWEEK 7: 20-25min easy @ 6:30+/km (5.7 mph / 9.2 km/h) + 4x50m strides\n\nZone 2 conversational\nNasal breathing focus\n\nTreadmill: 5.7-6.2 mph\nTotal: 7-10km depending on week'},
{day:'Wednesday',type:'Strength',focus:'Upper Body',detail:'Row, SkiErg, Wall Balls, Farmers',specifics:'5min warm-up\n\nWEEK 1-2: Row 4x1000m (4:50-5:00), 2min rest\nWEEK 1-2: SkiErg 4x500m (2:15-2:20), 2min rest\nWEEK 1-2: Wall Balls 4x15 @ 6kg (womens)\nWEEK 1-2: Farmers 3x200m @ 16kg per hand (womens)\n\nWEEK 3-4: Row 5x750m (3:30-3:40), 90s rest\nWEEK 3-4: SkiErg 5x400m (1:50-2:00), 90s rest\nWEEK 3-4: Wall Balls 5x12 @ 9kg (mens) unbroken\nWEEK 3-4: Farmers 4x200m @ 22kg per hand\n\nWEEK 5-6: Row 6x500m (1:50-2:00 HARD), 2min rest\nWEEK 5-6: SkiErg 6x300m (1:05-1:10 MAX), 90s rest\nWEEK 5-6: Wall Balls 6x10 @ 9kg fast\nWEEK 5-6: Farmers 5x200m @ 24kg per hand (mens)\n\nWEEK 7: Light activation only\n\nPush Press: 3-4x8-10 (30-60kg)\nRows/Pull-ups: 3-4x8-12'},
{day:'Thursday',type:'Running',focus:'Tempo/Threshold',detail:'Interval work at threshold',specifics:'Warm-up: 2km easy (5.7-6.2 mph)\n\nWEEK 1-2: 6x1km @ 5:30-5:45/km (6.5-6.8 mph / 10.4-10.9 km/h), 2min rest\nWEEK 3-4: 8x800m @ 5:15-5:30/km (6.8-7.1 mph / 10.9-11.4 km/h), 90s rest\nWEEK 5-6: 10x400m @ 5:00-5:15/km (7.1-7.5 mph / 11.4-12.0 km/h), 60s rest\nWEEK 7: 4x400m @ race pace 5:20-5:30/km (6.8-7.0 mph / 10.9-11.2 km/h), 90s rest\n\nCool-down: 1km easy\n\nTreadmill: Use mph shown\nTotal: 7-9km depending on week'},
{day:'Friday',type:'Running',focus:'Long Steady Run',detail:'Progressive distance 14-17km',specifics:'WEEK 1-2: 14-15km @ 6:00-6:15/km (5.9-6.2 mph / 9.6-10.0 km/h)\nWEEK 3-4: 15-16km @ 6:00-6:15/km + 3x2km tempo @ 5:20/km (7.0 mph / 11.2 km/h)\nWEEK 5-6: 16-17km @ 6:00-6:15/km + 4x1km tempo @ 5:10/km (7.2 mph / 11.6 km/h)\nWEEK 7: REST or very easy walk\n\nPractice race nutrition\nTreadmill: Use mph shown\n\nTotal: 14-17km (building to peak)'},
{day:'Saturday',type:'Rest',focus:'Active Recovery',detail:'Rest and recovery',specifics:'WEEK 1-2: Full rest OR 20-30min easy swim/bike\nWEEK 3-4: Full rest OR 30min easy activity\nWEEK 5-6: Full rest preferred\nWEEK 7: Complete rest\n\nAll weeks:\n• Foam rolling\n• Stretching\n• Mobility work\n• Hydration focus\n• Massage (optional)'},
{day:'Sunday',type:'Hybrid',focus:'Hyrox Station Circuits',detail:'Progressive simulation work',specifics:'Warm-up: 10-15min easy run (5.7-6.2 mph)\n\nWEEK 1-2: 3 rounds\n500m SkiErg / 1km run (6.2-6.5 mph) / 50m Sled Push 70kg / 1km run / 50m Sled Pull 55kg / 1km run / 40m Burpee Broad Jump\nTotal: ~9km + stations\n\nWEEK 3-4: FOR TIME @ 80%\n1km run / 1000m SkiErg / 1km / Sled Push 102kg / 1km / Sled Pull 84kg / 1km / 80m Burpees\nTransition practice (20-25s)\nTotal: 4km + 4 stations\n\nWEEK 5-6: FULL HYROX @ 85% effort\n8km run + all 8 stations @ MENS WEIGHTS\n1km run / 1000m SkiErg / 1km / Push 152kg / 1km / Pull 103kg / 1km / Burpees / 1km / 1000m Row / 1km / Farmers 24kg / 1km / Sandbag 20kg / 1km / 100 Wall Balls 9kg\nRecord ALL splits, transitions under 25s\n\nWEEK 7: REST or very light mobility\n\nCool-down: 10min'}
];

const mixedProg={
1:{focus:'Base Building',intensity:'Low-Moderate',notes:'WOMENS WEIGHTS: Push 70kg / Pull 55kg / Wall Balls 6kg / Farmers 16kg per hand',startDate:'2025-10-20'},
2:{focus:'Base Building',intensity:'Low-Moderate',notes:'WOMENS WEIGHTS: Push 70kg / Pull 55kg / Wall Balls 6kg / Farmers 16kg per hand',startDate:'2025-10-27'},
3:{focus:'Adaptation Phase',intensity:'Moderate',notes:'70% MENS: Push 102kg / Pull 84kg / Wall Balls 9kg / Farmers 22kg per hand (transitioning)',startDate:'2025-11-03'},
4:{focus:'Adaptation Phase',intensity:'Moderate-High',notes:'70% MENS: Push 102kg / Pull 84kg / Wall Balls 9kg / Farmers 22kg per hand',startDate:'2025-11-10'},
5:{focus:'Peak Phase',intensity:'High',notes:'MENS WEIGHTS: Push 152kg / Pull 103kg / Wall Balls 9kg / Farmers 24kg per hand. Full simulation!',startDate:'2025-11-17'},
6:{focus:'Peak Phase',intensity:'High',notes:'MENS WEIGHTS: Push 152kg / Pull 103kg / Wall Balls 9kg / Farmers 24kg. Final simulation!',startDate:'2025-11-24'},
7:{focus:'Taper - RACE WEEK',intensity:'Low',notes:'Light activation only. RACE DAY: Saturday 6 December. Target: 1:15-1:18',startDate:'2025-12-01'}
};

const mensProg={1:{focus:'Base',intensity:'Mod',notes:'Push 160kg / Pull 110kg / 10 walls @ 9kg / Farmers 20kg',startDate:'2025-10-20'},2:{focus:'Strength',intensity:'Mod-High',notes:'Push 170kg / Pull 120kg / 20 walls @ 12kg / Farmers 24kg',startDate:'2025-10-27'},3:{focus:'Intensity',intensity:'High',notes:'Push 170kg / Pull 120kg / 25 walls @ 12kg / Farmers 28kg',startDate:'2025-11-03'},4:{focus:'Race Sim',intensity:'High',notes:'Push 170kg / Pull 120kg (12 reps) / 30 walls @ 12kg',startDate:'2025-11-10'},5:{focus:'PEAK',intensity:'V.High',notes:'PEAK: Push 175kg / Pull 125kg / 35 walls @ 12kg',startDate:'2025-11-17'},6:{focus:'Rehearsal',intensity:'Mod-High',notes:'Push 160kg / Pull 110kg / 25-30 walls (taper)',startDate:'2025-11-24'},7:{focus:'Taper',intensity:'Low',notes:'RACE WEIGHTS! 152kg/102kg. RACE: 6 Dec',startDate:'2025-12-01'}};

const mixedProg={
1:{focus:'Base Building',intensity:'Low-Moderate',notes:'WOMENS WEIGHTS: Push 70kg / Pull 55kg / Wall Balls 6kg / Farmers 16kg per hand',startDate:'2025-10-20'},
2:{focus:'Base Building',intensity:'Low-Moderate',notes:'WOMENS WEIGHTS: Push 70kg / Pull 55kg / Wall Balls 6kg / Farmers 16kg per hand',startDate:'2025-10-27'},
3:{focus:'Adaptation Phase',intensity:'Moderate',notes:'70% MENS: Push 102kg / Pull 84kg / Wall Balls 9kg / Farmers 22kg per hand (transitioning)',startDate:'2025-11-03'},
4:{focus:'Adaptation Phase',intensity:'Moderate-High',notes:'70% MENS: Push 102kg / Pull 84kg / Wall Balls 9kg / Farmers 22kg per hand',startDate:'2025-11-10'},
5:{focus:'Peak Phase',intensity:'High',notes:'MENS WEIGHTS: Push 152kg / Pull 103kg / Wall Balls 9kg / Farmers 24kg per hand. Full simulation!',startDate:'2025-11-17'},
6:{focus:'Peak Phase',intensity:'High',notes:'MENS WEIGHTS: Push 152kg / Pull 103kg / Wall Balls 9kg / Farmers 24kg. Final simulation!',startDate:'2025-11-24'},
7:{focus:'Taper - RACE WEEK',intensity:'Low',notes:'Light activation only. RACE DAY: Saturday 6 December. Target: 1:15-1:18',startDate:'2025-12-01'}
};

const mensProg={1:{focus:'Base',intensity:'Mod',notes:'Push 160kg / Pull 110kg / 10 walls @ 9kg / Farmers 20kg',startDate:'2025-10-20'},2:{focus:'Strength',intensity:'Mod-High',notes:'Push 170kg / Pull 120kg / 20 walls @ 12kg / Farmers 24kg',startDate:'2025-10-27'},3:{focus:'Intensity',intensity:'High',notes:'Push 170kg / Pull 120kg / 25 walls @ 12kg / Farmers 28kg',startDate:'2025-11-03'},4:{focus:'Race Sim',intensity:'High',notes:'Push 170kg / Pull 120kg (12 reps) / 30 walls @ 12kg',startDate:'2025-11-10'},5:{focus:'PEAK',intensity:'V.High',notes:'PEAK: Push 175kg / Pull 125kg / 35 walls @ 12kg',startDate:'2025-11-17'},6:{focus:'Rehearsal',intensity:'Mod-High',notes:'Push 160kg / Pull 110kg / 25-30 walls (taper)',startDate:'2025-11-24'},7:{focus:'Taper',intensity:'Low',notes:'RACE WEIGHTS! 152kg/102kg. RACE: 6 Dec',startDate:'2025-12-01'}};

const getMixedWorkouts=(w)=>{const data={
1:[{day:'Monday',type:'Strength',focus:'Lower Body',detail:'Sled 70kg/55kg womens',specifics:'Warm-up: 10min row/bike + mobility\n\nSled Push: 5x8 @ 70kg (womens)\nSled Pull: 5x8 @ 55kg (womens)\nGoblet Squats: 4x10 (20kg)\nRDLs: 3x10 (40-50kg)\nWalking Lunges: 3x12\nCore: 3x :45 plank + hollow rocks\n\nCool-down: 5min'},{day:'Tuesday',type:'Running',focus:'Easy Aerobic',detail:'40-50min conversational',specifics:'40-50min @ 6:00-6:30/km (5.7-6.2 mph / 9.2-10.0 km/h)\nZone 2 conversational\nNasal breathing focus\n\nTreadmill: 5.7-6.2 mph\nTotal: 7-8km'},{day:'Wednesday',type:'Strength',focus:'Upper Body',detail:'Row, SkiErg, Walls 6kg, Farmers 16kg',specifics:'Warm-up: 5min row + mobility\n\nRow: 4x1000m (4:50-5:00), 2min rest\nSkiErg: 4x500m (2:15-2:20), 2min rest\nWall Balls: 4x15 @ 6kg (womens)\nFarmers: 3x200m @ 16kg per hand (womens)\nPush Press: 3x10 (30-40kg)\nRows: 3x10 (30-40kg)\n\nCool-down: 3min'},{day:'Thursday',type:'Running',focus:'Tempo',detail:'6x1km threshold',specifics:'Warm-up: 2km easy (5.7-6.2 mph)\n\nMain: 6x1km @ 5:30-5:45/km (6.5-6.8 mph / 10.4-10.9 km/h)\nRecovery: 2min rest\n\nCool-down: 1km easy\n\nTreadmill: 6.5-6.8 mph\nTotal: 9km'},{day:'Friday',type:'Running',focus:'Long Run',detail:'14-15km steady',specifics:'14-15km @ 6:00-6:15/km (5.9-6.2 mph / 9.6-10.0 km/h)\n\nPractice race nutrition\n\nTreadmill: 5.9-6.2 mph\nTotal: 14-15km'},{day:'Saturday',type:'Rest',focus:'Recovery',detail:'Rest or easy activity',specifics:'Option 1: Full rest + 30min mobility\nOption 2: 20-30min easy swim/bike\n\nFoam rolling\nHydration focus'},{day:'Sunday',type:'Hybrid',focus:'Hyrox Circuit',detail:'3 rounds circuit',specifics:'Warm-up: 15min easy run (5.7-6.2 mph)\n\n3 rounds:\n• 500m SkiErg\n• 1km run (6.2-6.5 mph / 10.0-10.4 km/h)\n• 50m Sled Push @ 70kg (womens)\n• 1km run\n• 50m Sled Pull @ 55kg (womens)\n• 1km run\n• 40m Burpee Broad Jump\n\nFocus: transition speed (30s max)\n\nCool-down: 10min\nTotal: ~9km + stations'}],
2:[{day:'Monday',type:'Strength',focus:'Lower Body',detail:'Sled 70kg/55kg womens',specifics:'Warm-up: 10min row/bike + mobility\n\nSled Push: 5x8 @ 70kg (womens)\nSled Pull: 5x8 @ 55kg (womens)\nGoblet Squats: 4x10 (20kg)\nRDLs: 3x10 (40-50kg)\nWalking Lunges: 3x12\nCore: 3x :45 plank + hollow rocks\n\nFocus: perfect technique\n\nCool-down: 5min'},{day:'Tuesday',type:'Running',focus:'Easy Aerobic',detail:'40-50min conversational',specifics:'40-50min @ 6:00-6:30/km (5.7-6.2 mph / 9.2-10.0 km/h)\nZone 2 conversational\n\nTreadmill: 5.7-6.2 mph\nTotal: 7-8km'},{day:'Wednesday',type:'Strength',focus:'Upper Body',detail:'Row, SkiErg, Walls 6kg, Farmers 16kg',specifics:'Warm-up: 5min row + mobility\n\nRow: 4x1000m (4:50-5:00), 2min rest\nSkiErg: 4x500m (2:15-2:20), 2min rest\nWall Balls: 4x15 @ 6kg (womens)\nFarmers: 3x200m @ 16kg per hand (womens)\nPush Press: 3x10 (30-40kg)\nRows: 3x10 (30-40kg)\n\nFocus: consistent splits\n\nCool-down: 3min'},{day:'Thursday',type:'Running',focus:'Tempo',detail:'6x1km threshold',specifics:'Warm-up: 2km easy (5.7-6.2 mph)\n\nMain: 6x1km @ 5:30-5:45/km (6.5-6.8 mph / 10.4-10.9 km/h)\nRecovery: 2min rest\n\nCool-down: 1km easy\n\nTreadmill: 6.5-6.8 mph\nTotal: 9km'},{day:'Friday',type:'Running',focus:'Long Run',detail:'14-15km steady',specifics:'14-15km @ 6:00-6:15/km (5.9-6.2 mph / 9.6-10.0 km/h)\n\nPractice race nutrition\n\nTreadmill: 5.9-6.2 mph\nTotal: 14-15km'},{day:'Saturday',type:'Rest',focus:'Recovery',detail:'Rest or easy activity',specifics:'Option 1: Full rest + mobility\nOption 2: 20-30min easy activity\n\nFoam rolling\nHydration'},{day:'Sunday',type:'Hybrid',focus:'Hyrox Circuit',detail:'3 rounds - beat Week 1',specifics:'Warm-up: 15min easy run (5.7-6.2 mph)\n\n3 rounds:\n• 500m SkiErg\n• 1km run (6.2-6.5 mph / 10.0-10.4 km/h)\n• 50m Sled Push @ 70kg (womens)\n• 1km run\n• 50m Sled Pull @ 55kg (womens)\n• 1km run\n• 40m Burpee Broad Jump\n\nAim to beat previous time\n\nCool-down: 10min\nTotal: ~9km + stations'}],
3:[{day:'Monday',type:'Strength',focus:'Lower Body',detail:'Sled 102kg/84kg (70% mens)',specifics:'Warm-up: 10min row/bike + mobility\n\nSled Push: 5x6 @ 102kg (70% mens - transitioning)\nSled Pull: 5x6 @ 84kg (70% mens - transitioning)\nBack Squats: 4x8 (50-60kg)\nBulgarian Split Squats: 3x8 (12-16kg each hand)\nSandbag Lunges: 4x100m @ 20kg (mens sandbag)\nWall Balls: 4x20 @ 9kg (mens ball)\nCore: 4x :45 plank variations\n\nCool-down: 5min'},{day:'Tuesday',type:'Running',focus:'Easy Aerobic',detail:'45-55min + strides',specifics:'45-55min @ 6:00-6:30/km (5.7-6.2 mph / 9.2-10.0 km/h)\nInclude: 6x100m strides @ 7.5-8.1 mph (12.0-13.0 km/h) in last 10min\n\nTreadmill: 5.7-6.2 mph easy, 7.5-8.1 mph strides\nTotal: 8-9km'},{day:'Wednesday',type:'Strength',focus:'Upper Body',detail:'Row, SkiErg, Walls 9kg, Farmers 22kg',specifics:'Warm-up: 5min row + mobility\n\nRow: 5x750m (3:30-3:40), 90s rest\nSkiErg: 5x400m (1:50-2:00), 90s rest\nWall Balls: 5x12 @ 9kg (mens ball) unbroken\nFarmers: 4x200m @ 22kg per hand (transitioning to mens)\nStrict Press: 4x8 (35-45kg)\nPull-ups/Rows: 3x12\n\nCool-down: 3min'},{day:'Thursday',type:'Running',focus:'Tempo',detail:'8x800m threshold',specifics:'Warm-up: 2km easy (5.7-6.2 mph)\n\nMain: 8x800m @ 5:15-5:30/km (6.8-7.1 mph / 10.9-11.4 km/h)\nRecovery: 90s rest\n\nNegative splits within each rep\n\nCool-down: 1km easy\n\nTreadmill: 6.8-7.1 mph\nTotal: 9.4km'},{day:'Friday',type:'Running',focus:'Long Run',detail:'15-16km with tempo',specifics:'15-16km @ 6:00-6:15/km (5.9-6.2 mph / 9.6-10.0 km/h)\n\nInclude: 3x2km @ tempo pace 5:20/km (7.0 mph / 11.2 km/h) at km 5, 9, 13\n\nTreadmill: Base 5.9-6.2 mph, Tempo 7.0 mph\nTotal: 15-16km'},{day:'Saturday',type:'Rest',focus:'Recovery',detail:'Rest or easy swim',specifics:'Full rest OR 30min easy swim/bike\n\nMassage or foam rolling 20min\nHydration'},{day:'Sunday',type:'Hybrid',focus:'Half Course Sim',detail:'4km + 4 stations @ 80%',specifics:'Warm-up: 10min easy run (5.7-6.2 mph)\n\nFOR TIME @ 80% effort:\n• 1km run (6.2-6.5 mph / 10.0-10.4 km/h)\n• 1000m SkiErg\n• 1km run\n• 50m Sled Push @ 102kg (70% mens)\n• 1km run\n• 50m Sled Pull @ 84kg (70% mens)\n• 1km run\n• 80m Burpee Broad Jump\n\nFocus: transitions 20-25s, pacing strategy\n\nCool-down: 10min\nTotal: 4km + 4 stations'}],
4:[{day:'Monday',type:'Strength',focus:'Lower Body',detail:'Sled 102kg/84kg (70% mens)',specifics:'Warm-up: 10min row/bike + mobility\n\nSled Push: 5x6 @ 102kg (70% mens)\nSled Pull: 5x6 @ 84kg (70% mens)\nBack Squats: 4x8 (50-60kg)\nBulgarian Split Squats: 3x8 (12-16kg each hand)\nSandbag Lunges: 4x100m @ 20kg\nWall Balls: 4x20 @ 9kg\nCore: 4x :45 plank variations\n\nAim for faster/heavier\n\nCool-down: 5min'},{day:'Tuesday',type:'Running',focus:'Easy Aerobic',detail:'45-55min + strides',specifics:'45-55min @ 6:00-6:30/km (5.7-6.2 mph / 9.2-10.0 km/h)\nInclude: 6x100m strides @ 7.5-8.1 mph in last 10min\n\nTreadmill: 5.7-6.2 mph easy, 7.5-8.1 mph strides\nTotal: 8-9km'},{day:'Wednesday',type:'Strength',focus:'Upper Body',detail:'Row, SkiErg, Walls 9kg, Farmers 22kg',specifics:'Warm-up: 5min row + mobility\n\nRow: 5x750m (3:30-3:40), 90s rest\nSkiErg: 5x400m (1:50-2:00), 90s rest\nWall Balls: 5x12 @ 9kg unbroken\nFarmers: 4x200m @ 22kg per hand\nStrict Press: 4x8 (35-45kg)\nPull-ups/Rows: 3x12\n\nFocus on power output\n\nCool-down: 3min'},{day:'Thursday',type:'Running',focus:'Tempo',detail:'8x800m threshold',specifics:'Warm-up: 2km easy (5.7-6.2 mph)\n\nMain: 8x800m @ 5:15-5:30/km (6.8-7.1 mph / 10.9-11.4 km/h)\nRecovery: 90s rest\n\nCool-down: 1km easy\n\nTreadmill: 6.8-7.1 mph\nTotal: 9.4km'},{day:'Friday',type:'Running',focus:'Long Run',detail:'15-16km with tempo',specifics:'15-16km @ 6:00-6:15/km (5.9-6.2 mph / 9.6-10.0 km/h)\n\nInclude: 3x2km @ tempo 5:20/km (7.0 mph / 11.2 km/h) at km 5, 9, 13\n\nTreadmill: Base 5.9-6.2 mph, Tempo 7.0 mph\nTotal: 15-16km'},{day:'Saturday',type:'Rest',focus:'Recovery',detail:'Complete rest preferred',specifics:'Complete rest preferred\nLight mobility work\nHydration'},{day:'Sunday',type:'Hybrid',focus:'Half Course Sim',detail:'4km + 4 stations @ 80%',specifics:'Warm-up: 10min easy run (5.7-6.2 mph)\n\nFOR TIME @ 80%:\n1km run (6.2-6.5 mph / 10.0-10.4 km/h) / 1000m SkiErg / 1km / 50m Push 102kg / 1km / 50m Pull 84kg / 1km / 80m Burpees\n\nBeat Week 3 time\nTransitions: 20-25s\n\nCool-down: 10min\nTotal: 4km + 4 stations'}],
5:[{day:'Monday',type:'Strength',focus:'Lower Body',detail:'Sled 152kg/103kg MENS',specifics:'Warm-up: 10min row/bike + mobility\n\nSled Push: 6x4 @ 152kg (mens) MAX SPEED\nSled Pull: 6x4 @ 103kg (mens) explosive\nBack Squats: 4x6 (70-75kg)\nTrap Bar Deadlifts: 3x6 (100-120kg)\nSandbag Lunges: 5x100m @ 20kg (mens)\nWall Balls: 5x15 @ 9kg (mens) unbroken\nBurpee Broad Jumps: 100 reps\n\nCool-down: 5min'},{day:'Tuesday',type:'Running',focus:'Easy Aerobic',detail:'50-60min easy',specifics:'50-60min @ 6:00-6:30/km (5.7-6.2 mph / 9.2-10.0 km/h)\n\nFocus: running economy, relaxed form\n\nTreadmill: 5.7-6.2 mph\nTotal: 8-10km'},{day:'Wednesday',type:'Strength',focus:'Upper Body',detail:'Row, SkiErg HARD, Walls 9kg, Farmers 24kg',specifics:'Warm-up: 5min row + mobility\n\nRow: 6x500m (1:50-2:00 HARD), 2min rest\nSkiErg: 6x300m (1:05-1:10 MAX), 90s rest\nWall Balls: 6x10 @ 9kg (mens) fast transitions\nFarmers: 5x200m @ 24kg per hand (mens) no drops\nPush Press: 4x6 (50-60kg)\nWeighted Pull-ups: 4x8 (10-15kg added)\n\nCool-down: 3min'},{day:'Thursday',type:'Running',focus:'Tempo',detail:'10x400m race pace',specifics:'Warm-up: 2km easy (5.7-6.2 mph)\n\nMain: 10x400m @ 5:00-5:15/km (7.1-7.5 mph / 11.4-12.0 km/h) race pace\nRecovery: 60s rest\n\nMaintain form under fatigue\n\nCool-down: 1km easy\n\nTreadmill: 7.1-7.5 mph\nTotal: 7km'},{day:'Friday',type:'Running',focus:'Long Run',detail:'16-17km with tempo',specifics:'16-17km @ 6:00-6:15/km (5.9-6.2 mph / 9.6-10.0 km/h)\n\nInclude: 4x1km @ threshold 5:10/km (7.2 mph / 11.6 km/h) at km 4, 8, 12, 15\n\nPractice race fueling\n\nTreadmill: Base 5.9-6.2 mph, Tempo 7.2 mph\nTotal: 16-17km'},{day:'Saturday',type:'Rest',focus:'Recovery',detail:'Full rest recommended',specifics:'Full rest recommended\n\nLight mobility 20min\nHydration and nutrition focus'},{day:'Sunday',type:'Hybrid',focus:'FULL HYROX',detail:'85% effort - ALL 8 stations',specifics:'Warm-up: As race day\n\nFULL SIMULATION @ 85% effort:\n1km run (6.2-6.5 mph / 10.0-10.4 km/h) / 1000m SkiErg / 1km / 50m Push 152kg (mens) / 1km / 50m Pull 103kg (mens) / 1km / 80m Burpees / 1km / 1000m Row / 1km / 200m Farmers 24kg per hand / 1km / 100m Sandbag 20kg / 1km / 100 Wall Balls 9kg\n\nKEY FOCUS:\n• Transitions under 25s\n• Pacing discipline\n• Record ALL splits\n\nCool-down: 10min\nTotal: 8km + all 8 stations'}],
6:[{day:'Monday',type:'Strength',focus:'Lower Body',detail:'Sled 152kg/103kg MENS',specifics:'Warm-up: 10min row/bike + mobility\n\nSled Push: 6x4 @ 152kg (mens) MAX SPEED\nSled Pull: 6x4 @ 103kg (mens) explosive\nBack Squats: 4x6 (70-75kg)\nTrap Bar Deadlifts: 3x6 (100-120kg)\nSandbag Lunges: 5x100m @ 20kg\nWall Balls: 5x15 @ 9kg unbroken\nBurpee Broad Jumps: 100 reps\n\nPush for PRs\n\nCool-down: 5min'},{day:'Tuesday',type:'Running',focus:'Easy Aerobic',detail:'50-60min easy',specifics:'50-60min @ 6:00-6:30/km (5.7-6.2 mph / 9.2-10.0 km/h)\n\nTreadmill: 5.7-6.2 mph\nTotal: 8-10km'},{day:'Wednesday',type:'Strength',focus:'Upper Body',detail:'Row, SkiErg MAX, Walls 9kg, Farmers 24kg',specifics:'Warm-up: 5min row + mobility\n\nRow: 6x500m (1:50-2:00 HARD), 2min rest\nSkiErg: 6x300m (1:05-1:10 MAX), 90s rest\nWall Balls: 6x10 @ 9kg fast\nFarmers: 5x200m @ 24kg per hand (mens)\nPush Press: 4x6 (50-60kg)\nWeighted Pull-ups: 4x8 (10-15kg)\n\nMaximum quality reps\n\nCool-down: 3min'},{day:'Thursday',type:'Running',focus:'Tempo',detail:'10x400m race pace',specifics:'Warm-up: 2km easy (5.7-6.2 mph)\n\nMain: 10x400m @ 5:00-5:15/km (7.1-7.5 mph / 11.4-12.0 km/h)\nRecovery: 60s rest\n\nCool-down: 1km easy\n\nTreadmill: 7.1-7.5 mph\nTotal: 7km'},{day:'Friday',type:'Running',focus:'Long Run',detail:'16-17km with tempo',specifics:'16-17km @ 6:00-6:15/km (5.9-6.2 mph / 9.6-10.0 km/h)\n\nInclude: 4x1km @ 5:10/km (7.2 mph / 11.6 km/h) at km 4, 8, 12, 15\n\nTreadmill: Base 5.9-6.2 mph, Tempo 7.2 mph\nTotal: 16-17km'},{day:'Saturday',type:'Rest',focus:'Recovery',detail:'Full rest',specifics:'Full rest\nPrepare for final simulation\nHydration\nMobility'},{day:'Sunday',type:'Hybrid',focus:'FULL HYROX',detail:'85% - beat Week 5',specifics:'Warm-up: As race day\n\nFULL HYROX @ 85%:\n8km + all 8 stations @ MENS WEIGHTS (152kg/103kg/9kg/24kg)\n\nAim to BEAT Week 5 time\nPerfect partner transitions\nRecord final benchmark splits\n\nCool-down: 10min\nTotal: 8km + all 8 stations'}],
7:[{day:'Monday',type:'Strength',focus:'Activation',detail:'Light technique @ 152kg/103kg',specifics:'Warm-up: 15min easy movement\n\nSled Push: 2x2 @ 152kg (mens) technique only\nSled Pull: 2x2 @ 103kg (mens) technique only\nWall Balls: 2x5 @ 9kg\nFarmers: 1x100m @ 24kg per hand\n\nActivation only - feel the weight\n\nMobility: 15min'},{day:'Tuesday',type:'Running',focus:'Shakeout',detail:'20-25min easy + strides',specifics:'20-25min easy @ 6:30+/km (5.7 mph / 9.2 km/h or slower)\n\nInclude: 4x50m strides @ 7.5-8.1 mph (12.0-13.0 km/h)\n\nTreadmill: 5.7 mph easy, 7.5-8.1 mph strides\nTotal: 3-4km'},{day:'Wednesday',type:'Running',focus:'Sharpening',detail:'4x400m race pace',specifics:'Warm-up: 1km easy (5.7-6.2 mph)\n\nMain: 4x400m @ race pace 5:20-5:30/km (6.8-7.0 mph / 10.9-11.2 km/h)\nRecovery: 90s rest\n\nCool-down: 1km easy\n\nTreadmill: 6.8-7.0 mph\nTotal: 4km'},{day:'Thursday',type:'Running',focus:'Pre-Race Prep',detail:'Very easy 2km + strides',specifics:'2km VERY easy @ 5.6 mph (9.0 km/h) or slower\n\n4x50m strides @ 7.5-8.1 mph (12.0-13.0 km/h)\n\nPractice station setups:\n• SkiErg grip\n• Sled technique\n• Wall ball rhythm\n\nTreadmill: 5.6 mph\nTotal: 10min session'},{day:'Friday',type:'Rest',focus:'COMPLETE REST',detail:'Race prep day',specifics:'COMPLETE REST DAY\n\n• Hydration: 3L+ water\n• Carb loading: sweet potato, rice, pasta, oats\n• Meal prep for race day\n• Gear check: all equipment ready\n• Visualize race and partner transitions\n• Early to bed (9pm)'},{day:'Saturday',type:'Hybrid',focus:'RACE DAY 🏆',detail:'Mixed Doubles - 6 December',specifics:'🏆 RACE DAY - 6 December 2025\n\nMORNING:\n• Wake 4-5hrs before\n• Breakfast 2-3hrs before (porridge + banana + honey)\n• Sip water + electrolytes\n• Arrive 90min early\n\nWARM-UP (60min before):\n• 10min progressive run (easy → moderate)\n• Dynamic stretches\n• 2min easy SkiErg\n• Practice transitions with partner\n• 3x Wall Ball + 20m sled touch\n• Mental visualization\n\nRACE:\nMixed Doubles - Mens Weight Division\nTARGET TIME: 1:15:00 - 1:18:00\n\nPACING:\n• Runs: 5:30-5:40/km (6.5-6.8 mph), negative split\n• Stations: GO HARD\n• Roxzone: 20-30s transitions\n• Partner: Clear "READY" calls\n\nPOST-RACE:\n• Cool down 10min\n• Hydrate\n• Protein + carbs\n• CELEBRATE! 🎉'},{day:'Sunday',type:'Rest',focus:'Post-Race',detail:'Recovery',specifics:'Post-Race Recovery:\n\n• Light walk 20-30min\n• Gentle stretching\n• Ice bath (optional)\n• Refuel well\n• Hydrate\n• Review race performance\n• CELEBRATE YOUR ACHIEVEMENT! 🏆'}]
};return data[w]||data[1];};

const getMensWorkouts=(w)=>{const data={1:[{day:'Mon',type:'Strength',focus:'Lower',detail:'160kg/110kg',specifics:'Sled Push: 5x50m @ 160kg\nRDLs: 3x8 (12kg each)\nSled Pull: 6x50m @ 110kg\nBulgarian: 3x8 (10kg each)'},{day:'Tue',type:'Running',focus:'Easy',detail:'10km',specifics:'10km @ 10.2 km/h (6.34 mph - 5:52/km)\nTotal: 10km'},{day:'Wed',type:'Strength',focus:'Upper',detail:'Farmers 20kg',specifics:'Rows: 4x6 (80-100kg)\nPress: 3x8 (60-80kg)\nSkiErg: 6x250m\nFarmers: 3x40m @ 20kg each'},{day:'Thu',type:'Running',focus:'Tempo',detail:'4x1km',specifics:'4x1km @ 10.5 km/h (6.53mph - 5:43/km)\n90s recovery\nTotal: 10km'},{day:'Fri',type:'Running',focus:'Long',detail:'14km',specifics:'14km @ 10.2 km/h (6.34mph - 5:52/km)\nTotal: 14km'},{day:'Sat',type:'Rest',focus:'Recovery',detail:'Rest',specifics:'Walk\nStretch\nFoam roll'},{day:'Sun',type:'Hybrid',focus:'Circuits',detail:'10 walls @ 9kg',specifics:'2 rounds:\nSled 60kg / Burpees / Sandbag 15kg / Farmers 15kg / 10 walls @ 9kg'}],2:[{day:'Mon',type:'Strength',focus:'Lower',detail:'170kg/120kg',specifics:'Sled Push: 5x50m @ 170kg\nRDLs: 3x6 (16kg each)\nSled Pull: 8x50m @ 120kg'},{day:'Tue',type:'Running',focus:'Easy',detail:'10km',specifics:'10km @ 10.2 km/h\nTotal: 10km'},{day:'Wed',type:'Strength',focus:'Upper',detail:'Farmers 24kg',specifics:'Deadlifts: 4x5 (120-140kg)\nSkiErg: 8x250m\nFarmers: 3x50m @ 24kg each'},{day:'Thu',type:'Running',focus:'Tempo',detail:'5x1km',specifics:'5x1km @ 10.5 km/h\nTotal: 10km'},{day:'Fri',type:'Running',focus:'Long',detail:'14km',specifics:'14km @ 9.6 km/h\nTotal: 14km'},{day:'Sat',type:'Rest',focus:'Recovery',detail:'Rest',specifics:'Walk\nStretch'},{day:'Sun',type:'Hybrid',focus:'Circuits',detail:'20 walls @ 12kg',specifics:'2 rounds:\nSled 170kg / 20 walls @ 12kg'}],3:[{day:'Mon',type:'Strength',focus:'Lower',detail:'170kg/120kg (10)',specifics:'Sled Push: 6x50m @ 170kg\nSled Pull: 10x50m @ 120kg'},{day:'Tue',type:'Running',focus:'Fartlek',detail:'8x3min',specifics:'8x3min @ 10.5 km/h\nTotal: 10.5km'},{day:'Wed',type:'Strength',focus:'Upper',detail:'500m test, 28kg',specifics:'500m row test\nFarmers: 3x40m @ 28kg each'},{day:'Thu',type:'Running',focus:'VO2Max',detail:'6x800m',specifics:'6x800m @ 11.0 km/h\nTotal: 10km'},{day:'Fri',type:'Running',focus:'Long',detail:'15km',specifics:'15km total\nTotal: 15km'},{day:'Sat',type:'Rest',focus:'Recovery',detail:'Rest',specifics:'Walk'},{day:'Sun',type:'Hybrid',focus:'Circuits',detail:'25 walls @ 12kg',specifics:'3 rounds:\n25 walls @ 12kg'}],4:[{day:'Mon',type:'Strength',focus:'Lower',detail:'170kg/120kg (12)',specifics:'Sled Push: 4x50m @ 170kg\nSled Pull: 12x50m @ 120kg'},{day:'Tue',type:'Running',focus:'Tempo',detail:'2x3km',specifics:'2x3km @ 10.2 km/h\nTotal: 10km'},{day:'Wed',type:'Strength',focus:'Upper',detail:'4x500m SkiErg',specifics:'SkiErg: 4x500m'},{day:'Thu',type:'Running',focus:'Threshold',detail:'5x1km RACE',specifics:'5x1km @ 10.8 km/h\nTotal: 11km'},{day:'Fri',type:'Running',focus:'Long',detail:'16km',specifics:'16km total\nTotal: 16km'},{day:'Sat',type:'Rest',focus:'Recovery',detail:'Rest',specifics:'Walk'},{day:'Sun',type:'Hybrid',focus:'Mini-Course',detail:'30 walls @ 12kg',specifics:'Mini-Course:\n30 walls @ 12kg'}],5:[{day:'Mon',type:'Strength',focus:'Lower PEAK',detail:'175kg/125kg MAX',specifics:'Sled Push: 1x50m @ 175kg MAX\nSled Pull: 12x50m @ 125kg MAX'},{day:'Tue',type:'Running',focus:'VO2Max',detail:'8x600m',specifics:'8x600m @ 11.2 km/h\nTotal: 10.5km'},{day:'Wed',type:'Strength',focus:'Upper',detail:'1000m test',specifics:'1000m row test\nFarmers: 4x50m @ 28kg'},{day:'Thu',type:'Running',focus:'Tempo',detail:'8km continuous',specifics:'8km @ 10.2 km/h\nTotal: 11km'},{day:'Fri',type:'Running',focus:'Long PEAK',detail:'17km MAX',specifics:'17km PEAK\nTotal: 17km'},{day:'Sat',type:'Rest',focus:'Recovery',detail:'Rest',specifics:'Walk'},{day:'Sun',type:'Hybrid',focus:'Full Sim',detail:'35 walls PEAK',specifics:'Full Hyrox:\n35 walls @ 12kg'}],6:[{day:'Mon',type:'Strength',focus:'Lower Taper',detail:'160kg/110kg',specifics:'Sled Push: 3x50m @ 160kg\nSled Pull: 8x50m @ 110kg'},{day:'Tue',type:'Running',focus:'Easy',detail:'9km',specifics:'9km EASY\nTotal: 9km'},{day:'Wed',type:'Strength',focus:'Upper',detail:'Race pace',specifics:'SkiErg race pace\nFarmers: 3x40m @ 22kg'},{day:'Thu',type:'Running',focus:'Tempo',detail:'7km race pace',specifics:'7km @ 10.5 km/h\nTotal: 10km'},{day:'Fri',type:'Running',focus:'Easy',detail:'13km',specifics:'13km easy\nTotal: 13km'},{day:'Sat',type:'Rest',focus:'Recovery',detail:'Mobility',specifics:'Stretch\nFoam roll'},{day:'Sun',type:'Hybrid',focus:'Rehearsal',detail:'25-30 walls',specifics:'Rehearsal:\n25-30 walls @ 12kg'}],7:[{day:'Mon',type:'Strength',focus:'Activation',detail:'RACE 152kg/102kg',specifics:'RACE WEIGHTS!\nSled Push: 2x50m @ 152kg\nSled Pull: 3x50m @ 102kg'},{day:'Tue',type:'Running',focus:'Shakeout',detail:'6km',specifics:'6km easy\nTotal: 6km'},{day:'Wed',type:'Strength',focus:'Light',detail:'Easy',specifics:'SkiErg: 3x250m easy'},{day:'Thu',type:'Running',focus:'Shakeout',detail:'5km',specifics:'5km easy\nTotal: 5km'},{day:'Fri',type:'Rest',focus:'REST',detail:'Rest',specifics:'Complete rest\nHydrate\nSleep'},{day:'Sat',type:'Hybrid',focus:'RACE DAY 🏆',detail:'6 December',specifics:'RACE DAY!\nTARGET: SUB 1:30:00 🔥'},{day:'Sun',type:'Rest',focus:'Celebrate',detail:'Recovery',specifics:'CELEBRATE! 🏆'}]};return data[w]||data[1];};

const currentPlan=plan==='mixed'?getMixedWorkouts(week):getMensWorkouts(week);
const currentProgram=plan==='mixed'?mixedProg:mensProg;
const toggleComp=(w,i)=>{const k=`${user}-${plan}-${w}-${i}`;setComp(p=>({...p,[k]:!p[k]}));};
const isComp=(w,i)=>comp[`${user}-${plan}-${w}-${i}`]||false;
const getCompletion=(w)=>{const t=plan==='mixed'?getMixedWorkouts(w):getMensWorkouts(w);let c=0;t.forEach((_,i)=>{if(isComp(w,i))c++;});return{completed:c,total:t.length,percentage:Math.round((c/t.length)*100)};};
const getRunKm=(w)=>{const t=plan==='mixed'?getMixedWorkouts(w):getMensWorkouts(w);let km=0;t.forEach((d,i)=>{if(isComp(w,i)&&d.type==='Running'){const s=d.specifics.toLowerCase();if(s.match(/\b17km\b/))km+=17;else if(s.match(/\b16km\b/))km+=16;else if(s.match(/\b15km\b/))km+=15;else if(s.match(/\b14km\b/))km+=14;else if(s.match(/\b13km\b/))km+=13;else if(s.match(/\b11km\b/))km+=11;else if(s.match(/10\.5km/))km+=10.5;else if(s.match(/\b10km\b/))km+=10;else if(s.match(/9\.4km/))km+=9.4;else if(s.match(/\b9km\b/))km+=9;else if(s.match(/\b8km\b/))km+=8;else if(s.match(/\b7km\b/))km+=7;else if(s.match(/\b6km\b/))km+=6;else if(s.match(/\b5km\b/))km+=5;else if(s.match(/\b4km\b/))km+=4;else if(s.match(/\b3km\b/))km+=3;}});return km;};
const logWorkout=()=>{if(!currentWorkout.type)return;setWorkouts([{...currentWorkout,id:Date.now(),user,plan},...workouts]);setCurrentWorkout({date:new Date().toISOString().split('T')[0],type:'',duration:'',notes:''});setShowLogForm(false);};
const logMeal=()=>{if(!currentMeal.mealName||!currentMeal.calories)return;setNutritionLog([{...currentMeal,id:Date.now(),calories:parseFloat(currentMeal.calories),protein:parseFloat(currentMeal.protein)||0,carbs:parseFloat(currentMeal.carbs)||0,fats:parseFloat(currentMeal.fats)||0},...nutritionLog]);setCurrentMeal({date:new Date().toISOString().split('T')[0],mealName:'',calories:'',protein:'',carbs:'',fats:''});setShowNutritionForm(false);};
const getUserWorkouts=(u)=>workouts.filter(w=>w.user===u);
const getStats=(u)=>{const wa=new Date();wa.setDate(wa.getDate()-7);const ww=workouts.filter(w=>w.user===u&&new Date(w.date)>=wa);return{total:ww.length,running:ww.filter(w=>w.type==='Running').length,strength:ww.filter(w=>w.type==='Strength').length,hybrid:ww.filter(w=>w.type==='Hybrid').length};};
const getTodayNutrition=()=>{const td=new Date().toISOString().split('T')[0];return nutritionLog.filter(m=>m.date===td).reduce((a,m)=>({calories:a.calories+m.calories,protein:a.protein+m.protein,carbs:a.carbs+m.carbs,fats:a.fats+m.fats}),{calories:0,protein:0,carbs:0,fats:0});};
const getRecentNutrition=()=>{const c=new Date();c.setDate(c.getDate()-7);return nutritionLog.filter(m=>new Date(m.date)>=c);};

return <div className="min-h-screen bg-black text-white p-4"><div className="max-w-6xl mx-auto pb-20">
        <div className="mb-8 text-center">
          <div className="flex items-center justify-center gap-3 mb-3">
            <img src="https://hyrox.com/wp-content/uploads/2023/09/hyrox_logo.svg" alt="Hyrox" className="h-12" onError={(e)=>{e.target.style.display='none';e.target.nextSibling.style.display='flex';}} />
            <div style={{display:'none'}} className="items-center gap-3">
              <Flame s={40} style={{color:'#FF4500'}} />
              <h1 className="text-4xl font-bold">HYROX</h1>
            </div>
          </div>
          <h2 className="text-2xl font-semibold mb-2">Training Logger</h2>
          <p className="text-gray-300">Track your journey to race day</p>
        </div>

<div className="flex gap-3 mb-6 justify-center flex-wrap">
<button onClick={()=>{setUser('user1');setPlan('mixed');}} className={`flex items-center gap-2 px-6 py-3 rounded-lg font-semibold ${user==='user1'?'text-white shadow-lg':'bg-white text-black border-2 border-gray-200'}`} style={user==='user1'?{backgroundColor:'#FF4500'}:{}}><User s={20}/><div><div>Jade</div><div className="text-xs opacity-75">Mixed Doubles</div></div></button>
<button onClick={()=>{setUser('user2');setPlan('mens');}} className={`flex items-center gap-2 px-6 py-3 rounded-lg font-semibold ${user==='user2'?'text-white shadow-lg':'bg-white text-black border-2 border-gray-200'}`} style={user==='user2'?{backgroundColor:'#FF4500'}:{}}><User s={20}/><div><div>Tony</div><div className="text-xs opacity-75">Mens Singles</div></div></button>
<button onClick={()=>{setUser('user3');setPlan('mens');}} className={`flex items-center gap-2 px-6 py-3 rounded-lg font-semibold ${user==='user3'?'text-white shadow-lg':'bg-white text-black border-2 border-gray-200'}`} style={user==='user3'?{backgroundColor:'#FF4500'}:{}}><User s={20}/><div><div>Nathan</div><div className="text-xs opacity-75">Mens Singles</div></div></button>
</div>

<div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
{(()=>{const s=getStats(user);return(<>
<div className="bg-white border-2 border-gray-200 rounded-lg p-4"><div className="text-gray-600 text-sm">This Week</div><div className="text-3xl font-bold" style={{color:'#FF4500'}}>{s.total}</div><div className="text-gray-600 text-xs">Total</div></div>
<div className="bg-white border-2 border-gray-200 rounded-lg p-4"><div className="text-gray-600 text-sm">Running</div><div className="text-3xl font-bold text-black">{s.running}</div><div className="text-gray-600 text-xs">Sessions</div></div>
<div className="bg-white border-2 border-gray-200 rounded-lg p-4"><div className="text-gray-600 text-sm">Strength</div><div className="text-3xl font-bold text-black">{s.strength}</div><div className="text-gray-600 text-xs">Sessions</div></div>
<div className="bg-white border-2 border-gray-200 rounded-lg p-4"><div className="text-gray-600 text-sm">Hybrid</div><div className="text-3xl font-bold text-black">{s.hybrid}</div><div className="text-gray-600 text-xs">Sessions</div></div>
</>);})()}
</div>

<div className="flex gap-2 mb-6 border-b-2 border-gray-200 overflow-x-auto">
{['plan','nutrition','log','history'].map(t=>{if(t==='nutrition'&&user!=='user1')return null;const icons={plan:Calendar,nutrition:Flame,log:Plus,history:TrendingUp};const I=icons[t];const labels={plan:'Plan',nutrition:'Nutrition',log:'Log',history:'History'};return<button key={t} onClick={()=>setTab(t)} className={`px-6 py-3 font-semibold whitespace-nowrap ${tab===t?'border-b-2':'text-gray-500'}`} style={tab===t?{borderBottomColor:'#FF4500',color:'#FF4500'}:{}} onMouseEnter={e=>e.currentTarget.style.color='#FF4500'} onMouseLeave={e=>{if(tab!==t)e.currentTarget.style.color='#6B7280';}}><I s={18} className="inline mr-2"/>{labels[t]}</button>})}
</div>

<div className="bg-white border-2 border-gray-200 rounded-lg p-6 text-black">
{tab==='plan'&&<div>
<h3 className="text-xl font-bold mb-4">{plan==='mixed'?'Mixed Doubles':'Mens Singles'} - 7 Week Program (Race: 6th December)</h3>
<div className="flex items-center gap-3 mb-6">
<button onClick={()=>setWeek(Math.max(1,week-1))} disabled={week===1} className="px-4 py-2 bg-white border-2 border-gray-200 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed text-black">←</button>
<div className="flex-1 flex gap-2 overflow-x-auto pb-2">
{[...Array(7)].map((_,i)=>{const w=i+1;const c=getCompletion(w);const info=currentProgram[w];const d=new Date(info.startDate);return<button key={w} onClick={()=>setWeek(w)} className={`flex-shrink-0 px-4 py-3 rounded-lg font-semibold transition border-2 ${week===w?'text-white shadow-lg':'bg-white text-black hover:bg-gray-50 border-gray-200'}`} style={week===w?{backgroundColor:'#FF4500',borderColor:'#FF4500'}:{}}><div className="text-sm">Week {w}</div><div className="text-xs opacity-75">{d.toLocaleDateString('en-GB',{day:'numeric',month:'short'})}</div>{c.completed>0&&<div className="text-xs mt-1">{c.percentage}%</div>}</button>})}
</div>
<button onClick={()=>setWeek(Math.min(7,week+1))} disabled={week===7} className="px-4 py-2 bg-white border-2 border-gray-200 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed text-black">→</button>
</div>
<div className="bg-white border-2 border-gray-200 rounded-lg p-5 mb-6">
<div className="flex justify-between items-start mb-3">
<div><h4 className="text-2xl font-bold text-black">Week {week}</h4><div className="text-sm text-gray-600 mt-1">Starting: {new Date(currentProgram[week].startDate).toLocaleDateString('en-GB',{weekday:'long',day:'numeric',month:'long',year:'numeric'})}</div></div>
{week===7&&<div className="px-4 py-2 rounded-lg font-bold text-sm shadow-lg text-white" style={{backgroundColor:'#FF4500'}}>🏆 RACE WEEK</div>}
</div>
<div className="grid grid-cols-1 md:grid-cols-4 gap-4 mt-4 mb-4">
<div><div className="text-sm text-gray-600">Phase</div><div className="text-lg font-semibold text-black">{currentProgram[week].focus}</div></div>
<div><div className="text-sm text-gray-600">Intensity</div><div className="text-lg font-semibold text-black">{currentProgram[week].intensity}</div></div>
<div><div className="text-sm text-gray-600">Completion</div><div className="text-lg font-semibold text-black">{getCompletion(week).completed}/{getCompletion(week).total} sessions</div></div>
<div><div className="text-sm text-gray-600">Running Volume</div><div className="text-lg font-semibold" style={{color:'#FF4500'}}>{getRunKm(week).toFixed(1)} km</div></div>
</div>
<div className="mt-3 text-sm text-gray-700 italic">{currentProgram[week].notes}</div>
</div>
<div className="space-y-3">{currentPlan.map((day,i)=><WorkoutCard key={`${week}-${i}`} day={day} isComplete={isComp(week,i)} onToggle={()=>toggleComp(week,i)}/>)}</div>
</div>}

{tab==='nutrition'&&user==='user1'&&<div>
<div className="flex justify-between mb-4"><h3 className="text-xl font-bold text-white">Jade's Nutrition</h3><button onClick={()=>setShowTargetForm(!showTargetForm)} className="px-4 py-2 rounded-lg text-sm font-semibold text-white" style={{backgroundColor:'#FF4500'}}>{showTargetForm?'Cancel':'Edit Targets'}</button></div>
{showTargetForm&&<div className="bg-white border-2 rounded-lg p-6 mb-6"><h4 className="text-lg font-bold mb-4 text-black">Adjust Targets</h4><div className="grid grid-cols-2 gap-4 mb-4"><div><label className="block text-sm font-bold mb-2 text-black">Calories</label><input type="number" value={nutritionTargets.calories} onChange={e=>setNutritionTargets({...nutritionTargets,calories:parseInt(e.target.value)})} className="w-full bg-white text-black rounded px-4 py-2 border-2 border-gray-200"/></div><div><label className="block text-sm font-bold mb-2 text-black">Protein</label><input type="number" value={nutritionTargets.protein} onChange={e=>setNutritionTargets({...nutritionTargets,protein:parseInt(e.target.value)})} className="w-full bg-white text-black rounded px-4 py-2 border-2 border-gray-200"/></div><div><label className="block text-sm font-bold mb-2 text-black">Carbs</label><input type="number" value={nutritionTargets.carbs} onChange={e=>setNutritionTargets({...nutritionTargets,carbs:parseInt(e.target.value)})} className="w-full bg-white text-black rounded px-4 py-2 border-2 border-gray-200"/></div><div><label className="block text-sm font-bold mb-2 text-black">Fats</label><input type="number" value={nutritionTargets.fats} onChange={e=>setNutritionTargets({...nutritionTargets,fats:parseInt(e.target.value)})} className="w-full bg-white text-black rounded px-4 py-2 border-2 border-gray-200"/></div></div><div className="bg-gray-800 rounded p-4 text-sm mb-4"><p className="font-bold text-white">💡 Weight Loss:</p><ul className="text-sm text-gray-200"><li>• Moderate: -300-500 cal/day</li><li>• Aggressive: -500-750 cal/day</li><li>• Keep protein 2g/kg</li></ul></div><button onClick={()=>setShowTargetForm(false)} className="w-full px-6 py-3 rounded-lg font-semibold text-white" style={{backgroundColor:'#FF4500'}}>Save</button></div>}
<div className="bg-white border-2 rounded-lg p-6 mb-6"><h4 className="text-2xl font-bold mb-2 text-black">Daily Targets</h4><div className="grid grid-cols-2 md:grid-cols-4 gap-4 mt-4"><div><div className="text-3xl font-bold" style={{color:'#FF4500'}}>{nutritionTargets.calories}</div><div className="text-sm text-gray-600">Calories</div></div><div><div className="text-3xl font-bold" style={{color:'#FF4500'}}>{nutritionTargets.protein}g</div><div className="text-sm text-gray-600">Protein</div></div><div><div className="text-3xl font-bold" style={{color:'#FF4500'}}>{nutritionTargets.carbs}g</div><div className="text-sm text-gray-600">Carbs</div></div><div><div className="text-3xl font-bold" style={{color:'#FF4500'}}>{nutritionTargets.fats}g</div><div className="text-sm text-gray-600">Fats</div></div></div></div>
{(()=>{const t=getTodayNutrition();const cp=(t.calories/nutritionTargets.calories)*100;const pp=(t.protein/nutritionTargets.protein)*100;const crp=(t.carbs/nutritionTargets.carbs)*100;const fp=(t.fats/nutritionTargets.fats)*100;return<div className="bg-white border-2 rounded-lg p-6 mb-6"><h4 className="text-xl font-bold mb-4 text-black">Today's Progress</h4><div className="space-y-4"><div><div className="flex justify-between mb-2"><span className="font-semibold text-black">Calories</span><span className="font-bold" style={{color:cp>=95&&cp<=105?'#FF4500':'#6B7280'}}>{Math.round(t.calories)}/{nutritionTargets.calories}</span></div><div className="w-full bg-gray-200 rounded-full h-3"><div className="h-3 rounded-full" style={{width:`${Math.min(cp,100)}%`,backgroundColor:cp>=95&&cp<=105?'#FF4500':'#D1D5DB'}}/></div></div><div><div className="flex justify-between mb-2"><span className="font-semibold text-black">Protein</span><span className="font-bold" style={{color:pp>=95?'#FF4500':'#6B7280'}}>{Math.round(t.protein)}g/{nutritionTargets.protein}g</span></div><div className="w-full bg-gray-200 rounded-full h-3"><div className="h-3 rounded-full" style={{width:`${Math.min(pp,100)}%`,backgroundColor:pp>=95?'#FF4500':'#D1D5DB'}}/></div></div><div><div className="flex justify-between mb-2"><span className="font-semibold text-black">Carbs</span><span className="font-bold" style={{color:crp>=95&&crp<=105?'#FF4500':'#6B7280'}}>{Math.round(t.carbs)}g/{nutritionTargets.carbs}g</span></div><div className="w-full bg-gray-200 rounded-full h-3"><div className="h-3 rounded-full" style={{width:`${Math.min(crp,100)}%`,backgroundColor:crp>=95&&crp<=105?'#FF4500':'#D1D5DB'}}/></div></div><div><div className="flex justify-between mb-2"><span className="font-semibold text-black">Fats</span><span className="font-bold" style={{color:fp>=95&&fp<=105?'#FF4500':'#6B7280'}}>{Math.round(t.fats)}g/{nutritionTargets.fats}g</span></div><div className="w-full bg-gray-200 rounded-full h-3"><div className="h-3 rounded-full" style={{width:`${Math.min(fp,100)}%`,backgroundColor:fp>=95&&fp<=105?'#FF4500':'#D1D5DB'}}/></div></div></div></div>})()}
{!showNutritionForm?<button onClick={()=>setShowNutritionForm(true)} className="w-full py-6 mb-6 border-2 border-dashed rounded-lg" style={{borderColor:'#FF4500',backgroundColor:'#FFF'}}><Plus s={28} style={{color:'#FF4500'}}/><div className="text-lg font-semibold" style={{color:'#FF4500'}}>Log Meal</div></button>:<div className="bg-gray-800 border-2 rounded-lg p-6 mb-6"><h4 className="text-lg font-bold mb-4 text-white">Log Meal</h4><div className="space-y-4"><div><label className="block text-sm font-bold mb-2 text-white">Date</label><input type="date" value={currentMeal.date} onChange={e=>setCurrentMeal({...currentMeal,date:e.target.value})} className="w-full bg-white text-black rounded px-4 py-2 border-2 border-gray-300" style={{height:'42px',fontSize:'16px'}}/></div><div><label className="block text-sm font-bold mb-2 text-white">Meal</label><input type="text" value={currentMeal.mealName} onChange={e=>setCurrentMeal({...currentMeal,mealName:e.target.value})} placeholder="Breakfast, Lunch" className="w-full bg-white text-black rounded px-4 py-2 border-2 border-gray-300 placeholder-gray-400" style={{height:'42px',fontSize:'16px'}}/></div><div><label className="block text-sm font-bold mb-2 text-white">Calories</label><input type="number" value={currentMeal.calories} onChange={e=>setCurrentMeal({...currentMeal,calories:e.target.value})} placeholder="500" className="w-full bg-white text-black rounded px-4 py-2 border-2 border-gray-300" style={{height:'42px',fontSize:'16px'}}/></div><div><label className="block text-sm font-bold mb-2 text-white">Protein (g)</label><input type="number" value={currentMeal.protein} onChange={e=>setCurrentMeal({...currentMeal,protein:e.target.value})} placeholder="30" className="w-full bg-white text-black rounded px-4 py-2 border-2 border-gray-300" style={{height:'42px',fontSize:'16px'}}/></div><div><label className="block text-sm font-bold mb-2 text-white">Carbs (g)</label><input type="number" value={currentMeal.carbs} onChange={e=>setCurrentMeal({...currentMeal,carbs:e.target.value})} placeholder="50" className="w-full bg-white text-black rounded px-4 py-2 border-2 border-gray-300" style={{height:'42px',fontSize:'16px'}}/></div><div><label className="block text-sm font-bold mb-2 text-white">Fats (g)</label><input type="number" value={currentMeal.fats} onChange={e=>setCurrentMeal({...currentMeal,fats:e.target.value})} placeholder="15" className="w-full bg-white text-black rounded px-4 py-2 border-2 border-gray-300" style={{height:'42px',fontSize:'16px'}}/></div><div className="flex gap-3"><button onClick={logMeal} className="flex-1 px-6 py-3 rounded-lg font-semibold text-white" style={{backgroundColor:'#FF4500'}}>Save</button><button onClick={()=>setShowNutritionForm(false)} className="px-6 py-3 bg-white border-2 border-gray-300 rounded-lg font-semibold text-black">Cancel</button></div></div></div>}
<div><h4 className="text-lg font-bold mb-3 text-white">Recent Meals</h4>{getRecentNutrition().length===0?<div className="text-center py-8 text-gray-400">No meals logged</div>:<div className="space-y-3">{getRecentNutrition().map(m=><div key={m.id} className="bg-white border-2 rounded-lg p-4"><div className="flex justify-between mb-2"><div><div className="font-bold text-black">{m.mealName}</div><div className="text-sm text-gray-600">{new Date(m.date).toLocaleDateString('en-GB',{weekday:'short',day:'numeric',month:'short'})}</div></div><div className="text-lg font-bold" style={{color:'#FF4500'}}>{m.calories} cal</div></div><div className="flex gap-4 text-sm text-gray-700"><span>P: {m.protein}g</span><span>C: {m.carbs}g</span><span>F: {m.fats}g</span></div></div>)}</div>}</div>
<div className="mt-6 bg-gray-800 rounded-lg p-5"><h4 className="font-bold text-lg mb-3 text-white">💧 Hydration</h4><ul className="text-sm text-gray-200"><li>• 2.5-3L water daily</li><li>• Electrolytes</li><li>• Multivitamin</li><li>• Omega-3</li></ul></div>
</div>}

{tab==='log'&&<div>
{!showLogForm?<button onClick={()=>setShowLogForm(true)} className="w-full py-8 border-2 border-dashed rounded-lg" style={{borderColor:'#FF4500',backgroundColor:'#FFF'}}><Plus s={32} style={{color:'#FF4500'}}/><div className="text-xl font-semibold" style={{color:'#FF4500'}}>Log Workout</div></button>:<div className="space-y-4"><h3 className="text-xl font-bold text-white">Log Workout</h3><div><label className="block text-sm font-medium mb-2 text-white">Date</label><input type="date" value={currentWorkout.date} onChange={e=>setCurrentWorkout({...currentWorkout,date:e.target.value})} className="w-full bg-white text-black rounded px-4 py-2 border-2 border-gray-200"/></div><div><label className="block text-sm font-medium mb-2 text-white">Type</label><select value={currentWorkout.type} onChange={e=>setCurrentWorkout({...currentWorkout,type:e.target.value})} className="w-full bg-white text-black rounded px-4 py-2 border-2 border-gray-200"><option value="">Select...</option><option value="Running">Running</option><option value="Strength">Strength</option><option value="Hybrid">Hybrid</option><option value="Rest">Rest</option></select></div><div><label className="block text-sm font-medium mb-2 text-white">Duration (min)</label><input type="number" value={currentWorkout.duration} onChange={e=>setCurrentWorkout({...currentWorkout,duration:e.target.value})} placeholder="60" className="w-full bg-white text-black rounded px-4 py-2 border-2 border-gray-200"/></div><div><label className="block text-sm font-medium mb-2 text-white">Notes</label><textarea value={currentWorkout.notes} onChange={e=>setCurrentWorkout({...currentWorkout,notes:e.target.value})} placeholder="How did it feel?" className="w-full bg-white text-black rounded px-4 py-2 h-24 border-2 border-gray-200"/></div><div className="flex gap-3"><button onClick={logWorkout} className="flex-1 px-6 py-3 rounded-lg font-semibold text-white" style={{backgroundColor:'#FF4500'}}>Save</button><button onClick={()=>setShowLogForm(false)} className="px-6 py-3 bg-white border-2 border-gray-300 rounded-lg font-semibold text-black">Cancel</button></div></div>}
</div>}

{tab==='history'&&<div>
<h3 className="text-xl font-bold mb-4 text-white">History</h3>
{getUserWorkouts(user).length===0?<div className="text-center py-12 text-gray-400"><Clock s={48} className="mx-auto mb-4 opacity-50"/><p>No workouts logged</p></div>:<div className="space-y-3">{getUserWorkouts(user).map(w=><div key={w.id} className="bg-white border-2 rounded-lg p-4"><div className="flex justify-between mb-2"><div><div className="font-bold text-black">{w.type}</div><div className="text-sm text-gray-600">{new Date(w.date).toLocaleDateString('en-GB',{weekday:'short',day:'numeric',month:'short'})}</div></div><div className="text-sm font-semibold text-black">{w.duration} min</div></div>{w.notes&&<div className="text-sm text-gray-700 mt-2 pt-2 border-t border-gray-300">{w.notes}</div>}</div>)}</div>}
</div>}

</div>

</div></div>
}
ReactDOM.render(<App/>,document.getElementById('root'));
</script>
</body>
</html>
