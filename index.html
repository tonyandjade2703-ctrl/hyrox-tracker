<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Hyrox Tracker">
  <title>Hyrox Training Logger</title>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    * {
      -webkit-tap-highlight-color: transparent;
      -webkit-touch-callout: none;
    }
    body {
      overscroll-behavior: none;
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
    }
  </style>
</head>
<body style="margin:0;padding:0;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto',sans-serif;background-color:#000000">
<div id="root"></div>
<script type="text/babel">
const {useState,useEffect}=React;
const Icon=({d,s=24})=><svg width={s} height={s} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" dangerouslySetInnerHTML={{__html:d}}/>;
const Calendar=({s=24})=><Icon d='<rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/>' s={s}/>;
const Plus=({s=24})=><Icon d='<line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/>' s={s}/>;
const User=({s=24})=><Icon d='<path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/>' s={s}/>;
const CheckCircle=({s=24})=><Icon d='<path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/>' s={s}/>;
const Flame=({s=24})=><Icon d='<path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"/>' s={s}/>;
const TrendingUp=({s=24})=><Icon d='<polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/><polyline points="17 6 23 6 23 12"/>' s={s}/>;
const Clock=({s=24})=><Icon d='<circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/>' s={s}/>;

const USERS = {
  'jade': { name: 'Jade', plan: 'mixed', category: 'Mixed Doubles' },
  'tony': { name: 'Tony', plan: 'mens', category: 'Mens Singles' },
  'nathan': { name: 'Nathan', plan: 'mens', category: 'Mens Singles' }
};

function WorkoutCard({day,isComplete,onToggle}){
  const[showDetails,setShowDetails]=useState(false);
  return <div className={`bg-white border-2 rounded-lg p-4 transition ${isComplete?'shadow-lg':'border-gray-200'}`} style={isComplete?{borderColor:'#FF4500'}:{}}>
    <div className="flex items-start gap-4">
      <button onClick={onToggle} className={`flex-shrink-0 mt-1 w-6 h-6 rounded border-2 flex items-center justify-center transition text-white ${isComplete?'border-transparent':'border-gray-300 hover:border-gray-400'}`} style={isComplete?{backgroundColor:'#FF4500'}:{}}>{isComplete&&<CheckCircle s={20}/>}</button>
      <div className="flex-1">
        <div className="flex items-start justify-between mb-2">
          <div><div className="font-bold text-lg text-black">{day.day}</div><div className="text-sm text-gray-600">{day.type} - {day.focus}</div></div>
          <div className="px-3 py-1 rounded-full text-xs font-semibold text-white" style={{backgroundColor:day.type==='Running'?'#FF4500':day.type==='Strength'?'#000000':day.type==='Hybrid'?'#FF4500':day.type==='Rest'?'#666666':'#333333'}}>{day.type}</div>
        </div>
        <div className="text-sm text-gray-700 mb-2">{day.detail}</div>
        <button onClick={()=>setShowDetails(!showDetails)} className="text-xs font-semibold" style={{color:'#FF4500'}}>{showDetails?'‚ñº Hide Details':'‚ñ∂ Show Full Workout'}</button>
        {showDetails&&<div className="mt-3 p-3 bg-gray-50 border border-gray-200 rounded text-sm text-black whitespace-pre-line">{day.specifics}</div>}
      </div>
    </div>
  </div>
}

function LoginScreen({onLogin}){
  const[email,setEmail]=useState('');
  const[password,setPassword]=useState('');
  const[error,setError]=useState('');

  const handleLogin=(e)=>{
    e.preventDefault();
    const user=USERS[email.toLowerCase()];
    if(user&&user.password===password){
      onLogin(email.toLowerCase(),user);
      setError('');
    }else{
      setError('Invalid email or password');
    }
  };

  return <div className="min-h-screen bg-black flex items-center justify-center p-4">
    <div className="w-full max-w-md">
      <div className="text-center mb-8">
        <Flame s={48} style={{color:'#FF4500'}} className="inline-block mb-4"/>
        <h1 className="text-4xl font-bold text-white mb-2">HYROX</h1>
        <h2 className="text-xl text-gray-300">Training Tracker</h2>
      </div>
      <div className="bg-white rounded-lg p-8 shadow-xl">
        <h3 className="text-2xl font-bold text-black mb-6">Sign In</h3>
        <form onSubmit={handleLogin} className="space-y-4">
          <div>
            <label className="block text-sm font-semibold text-gray-700 mb-2">Email</label>
            <input type="email" value={email} onChange={(e)=>setEmail(e.target.value)} className="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-orange-500 focus:outline-none text-black" placeholder="your@email.com" required/>
          </div>
          <div>
            <label className="block text-sm font-semibold text-gray-700 mb-2">Password</label>
            <input type="password" value={password} onChange={(e)=>setPassword(e.target.value)} className="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-orange-500 focus:outline-none text-black" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required/>
          </div>
          {error&&<div className="bg-red-50 border-2 border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm">{error}</div>}
          <button type="submit" className="w-full py-3 rounded-lg font-bold text-white text-lg hover:opacity-90 transition" style={{backgroundColor:'#FF4500'}}>Sign In</button>
        </form>
        <div className="mt-8 pt-6 border-t border-gray-200">
          <p className="text-sm text-gray-600 mb-3 font-semibold">Demo Accounts:</p>
          <div className="space-y-2 text-xs text-gray-500">
            <div className="bg-gray-50 p-2 rounded"><strong>Jade:</strong> jade@hyrox.com / jade2024</div>
            <div className="bg-gray-50 p-2 rounded"><strong>Tony:</strong> tony@hyrox.com / tony2024</div>
            <div className="bg-gray-50 p-2 rounded"><strong>Nathan:</strong> nathan@hyrox.com / nathan2024</div>
          </div>
        </div>
      </div>
    </div>
  </div>
}

function App(){
const[currentUser,setCurrentUser]=useState(USERS.jade);
const[userEmail,setUserEmail]=useState('jade');
const[tab,setTab]=useState('plan');
const[workouts,setWorkouts]=useState({});
const[comp,setComp]=useState({});
const[week,setWeek]=useState(1);
const[showLogForm,setShowLogForm]=useState(false);
const[currentWorkout,setCurrentWorkout]=useState({date:new Date().toISOString().split('T')[0],type:'',duration:'',notes:''});

useEffect(()=>{
  if(userEmail){
    try{
      const savedWorkouts=JSON.parse(localStorage.getItem(`workouts_${userEmail}`)||'[]');
      const savedComp=JSON.parse(localStorage.getItem(`comp_${userEmail}`)||'{}');
      setWorkouts({[userEmail]:savedWorkouts});
      setComp(savedComp);
    }catch(e){}
  }
},[userEmail]);

useEffect(()=>{
  if(userEmail&&workouts[userEmail]){
    localStorage.setItem(`workouts_${userEmail}`,JSON.stringify(workouts[userEmail]));
  }
},[workouts,userEmail]);

useEffect(()=>{
  if(userEmail){
    localStorage.setItem(`comp_${userEmail}`,JSON.stringify(comp));
  }
},[comp,userEmail]);

const handleLogout=()=>{
  // Switch between users instead of logout
  const userKeys=Object.keys(USERS);
  const currentIndex=userKeys.indexOf(userEmail);
  const nextIndex=(currentIndex+1)%userKeys.length;
  const nextUserId=userKeys[nextIndex];
  setUserEmail(nextUserId);
  setCurrentUser(USERS[nextUserId]);
  setTab('plan');
  setWeek(1);
};

// Jade's NEW detailed 7-week plan
const jadeWeeklyPlans = {
  1: [
    {day:'Tuesday Oct 21',type:'Running',focus:'Intervals',detail:'8x400m @ 3:45/km',specifics:'Warm-up: 2km easy (6:00-6:15/km | 6.0-6.2 mph) - Zone 2\n\nMain Set: 8x400m @ 3:45/km pace (16.0 kph | 9.9 mph), 90sec jog recovery\nHeart Rate Zone: Zone 4-5 (90-95% max HR | 180-190 bpm)\nFocus: Hard intervals, full recovery between reps\n\nCool-down: 1km easy (6:00-6:15/km | 6.0-6.2 mph) - Zone 2\nTotal: ~8km'},
    {day:'Wednesday Oct 22',type:'Rest',focus:'Complete Rest',detail:'Recovery day',specifics:'Complete rest day\nFocus: hydration (3L water), 8+ hours sleep\nLight walk acceptable (20-30min max)\nFoam rolling/stretching (20min)'},
    {day:'Thursday Oct 23',type:'Strength',focus:'Upper Full Body',detail:'Compound lifts + accessories',specifics:'Warm-up: 10min row easy + mobility\n\nMain Compound (4 sets each):\n‚Ä¢ Lat Pulldown: 10 reps @ 35kg (2min rest)\n‚Ä¢ Chest Press Machine or DB Bench: 10 reps @ 20kg DBs (2min rest)\n‚Ä¢ Seated Cable Row: 10 reps @ 35kg (90sec rest)\n‚Ä¢ DB Shoulder Press: 10 reps @ 12kg DBs (90sec rest)\n\nAccessory (3 sets):\n‚Ä¢ Single-Arm Cable Row: 12/arm @ 15kg (60sec rest)\n‚Ä¢ Assisted Dips or Tricep Pushdowns: 12 reps (60sec rest)\n‚Ä¢ Cable Face Pulls: 15 reps @ 15kg (60sec rest)\n\nCarry & Core (3 rounds):\n‚Ä¢ Farmer Carry: 100m @ 2x24kg\n‚Ä¢ Hanging Knee Raises or Ab Wheel: 12 reps\n‚Ä¢ KB Swings: 20 reps @ 20kg'},
    {day:'Friday Oct 24',type:'Running',focus:'Long Run',detail:'10km steady',specifics:'10km @ 4:30-4:40/km pace (12.9-13.3 kph | 8.0-8.3 mph)\nHeart Rate Zone: Zone 2-3 (70-80% max HR | 140-160 bpm)\nFocus: Consistent pacing, nasal breathing where possible\nTotal: 45-50min'},
    {day:'Saturday Oct 25',type:'Rest',focus:'Active Recovery',detail:'Full rest',specifics:'Complete rest day\nPrioritize recovery: 8+ hours sleep\nLight activity acceptable: 20-30min walk\nFoam rolling/yoga (30min)'},
    {day:'Sunday Oct 26',type:'Hybrid',focus:'Hyrox Conditioning',detail:'Women\'s weights - 3 rounds',specifics:'Warm-up: 10min easy movement + dynamic stretches\n\n3 Rounds For Time:\n‚Ä¢ 500m SkiErg\n‚Ä¢ 50m Sled Push @ 103kg (women\'s race weight)\n‚Ä¢ 50m Sled Pull @ 78kg (women\'s race weight)\n‚Ä¢ 80 Burpee Broad Jumps\n‚Ä¢ 500m Row\n‚Ä¢ 200m Farmers Carry @ 2x16kg (women\'s race weight)\n‚Ä¢ 100m Sandbag Lunges @ 10kg (women\'s race weight)\n‚Ä¢ 100 Wall Balls @ 6kg (women\'s race weight)\n\nTarget: 60-75min total\nFocus: ALL stations - technique, transitions, pacing'}
  ],
  2: [
    {day:'Monday Oct 27',type:'Strength',focus:'Leg Workout',detail:'Squats, RDLs, lunges',specifics:'Warm-up: 10min bike/row easy + leg swings\n\nMain Strength (4 sets each):\n‚Ä¢ Front Squats: 10 reps @ 35-40kg (2min rest)\n‚Ä¢ Single-Leg Romanian Deadlifts: 8/leg @ 15kg DBs (90sec rest)\n‚Ä¢ Step-Ups: 12/leg @ 18kg DBs (90sec rest)\n‚Ä¢ Goblet Reverse Lunges: 10/leg @ 24kg (60sec rest)\n\nAccessory (3 sets):\n‚Ä¢ Sumo Squats: 15 reps @ 28kg\n‚Ä¢ Lateral Box Step-Overs: 10/side @ bodyweight\n‚Ä¢ Banded Good Mornings: 15 reps\n\nCore Finisher: 3x(60sec Plank, 15 Bicycle Crunches, 20 Hollow Rocks, 10 V-Ups)'},
    {day:'Tuesday Oct 28',type:'Running',focus:'Tempo Run',detail:'4x1200m @ 4:00/km',specifics:'Warm-up: 2km easy (6:00-6:15/km | 6.0-6.2 mph) - Zone 2\n\nMain Set: 4x1200m @ 4:00/km pace (15.0 kph | 9.3 mph), 2min jog recovery\nHeart Rate Zone: Zone 3-4 (80-90% max HR | 160-180 bpm)\nFocus: Comfortably hard, can speak 1-2 words\n\nCool-down: 1km easy (6:00-6:15/km | 6.0-6.2 mph) - Zone 2\nTotal: ~9km'},
    {day:'Wednesday Oct 29',type:'Rest',focus:'Complete Rest',detail:'Recovery day',specifics:'Complete rest day\nHydration (3L), sleep (8+ hours)\n20-30min walk optional\nFoam rolling/stretching (20-30min)'},
    {day:'Thursday Oct 30',type:'Strength',focus:'Upper Full Body',detail:'Compound + accessories',specifics:'Warm-up: 10min row easy + mobility\n\nMain Compound (4 sets each):\n‚Ä¢ Assisted Pull-Ups or Lat Pulldown: 10 reps (2min rest)\n‚Ä¢ Incline DB Bench Press: 10 reps @ 18kg DBs (2min rest)\n‚Ä¢ Cable Rows (Neutral Grip): 10 reps @ 40kg (90sec rest)\n‚Ä¢ Arnold Press: 10 reps @ 10kg DBs (90sec rest)\n\nAccessory (3 sets):\n‚Ä¢ Chest-Supported DB Rows: 12 reps @ 16kg DBs (60sec rest)\n‚Ä¢ Cable Tricep Extensions: 12 reps @ 20kg (60sec rest)\n‚Ä¢ Cable Face Pulls: 20 reps @ 15kg (60sec rest)\n\nCarry & Core (3 rounds):\n‚Ä¢ Overhead Carry: 50m @ 15kg (single arm, switch)\n‚Ä¢ Farmer Carry: 50m @ 2x28kg\n‚Ä¢ Plank with Shoulder Taps: 20 total\n‚Ä¢ Dead Bugs: 20 total'},
    {day:'Friday Oct 31',type:'Running',focus:'Long Run',detail:'11km steady',specifics:'11km @ 4:30-4:40/km pace (12.9-13.3 kph | 8.0-8.3 mph)\nHeart Rate Zone: Zone 2-3 (70-80% max HR | 140-160 bpm)\nFocus: Aerobic development, comfortable pace\nTotal: 50-55min'},
    {day:'Saturday Nov 1',type:'Rest',focus:'Active Recovery',detail:'Full rest',specifics:'Complete rest day\nRecovery priority: 8-9 hours sleep\nLight walk (20-30min) optional\nFoam rolling/yoga (30min)'},
    {day:'Sunday Nov 2',type:'Hybrid',focus:'Hyrox Conditioning',detail:'Women\'s + 10%',specifics:'Warm-up: 10min easy + dynamic stretches\n\nFor Time (straight through):\n‚Ä¢ 1000m SkiErg\n‚Ä¢ 50m Sled Push @ 110kg (women\'s + 7kg)\n‚Ä¢ 1000m Row\n‚Ä¢ 50m Sled Pull @ 85kg (women\'s + 7kg)\n‚Ä¢ 100 Burpee Broad Jumps\n‚Ä¢ 200m Farmers Carry @ 2x18kg (women\'s + 2kg per hand)\n‚Ä¢ 100 Wall Balls @ 6kg (women\'s weight)\n‚Ä¢ 100m Sandbag Lunges @ 12kg (women\'s + 2kg)\n\nTarget: 50-65min total\nFocus: Continuous effort, ALL stations matter'}
  ],
  3: [
    {day:'Monday Nov 3',type:'Strength',focus:'Leg Workout',detail:'Back squats, RDLs, plyos',specifics:'Warm-up: 10min bike/row + dynamic stretches\n\nMain Strength (5 sets each - volume increase):\n‚Ä¢ Back Squats: 6 reps @ 55-60kg (2-3min rest)\n‚Ä¢ Romanian Deadlifts: 8 reps @ 40kg (2min rest)\n‚Ä¢ Walking Lunges: 30 total @ 18kg DBs (90sec rest)\n‚Ä¢ Pause Squats: 8 reps @ 45kg (90sec rest)\n\nPlyometric Power (3 sets):\n‚Ä¢ Depth Jumps: 8 reps (30cm box)\n‚Ä¢ Single-Leg Bounds: 5/leg\n‚Ä¢ Box Jumps: 8 reps @ 65cm\n\nCore: 4x(45sec Side Plank/side, 15 Dead Bugs, 20 Russian Twists w/10kg)'},
    {day:'Tuesday Nov 4',type:'Running',focus:'Intervals',detail:'6x600m @ 3:50/km',specifics:'Warm-up: 2km easy (6:00-6:15/km | 6.0-6.2 mph) - Zone 2\n\nMain Set: 6x600m @ 3:50/km pace (15.7 kph | 9.7 mph), 90sec jog recovery\nHeart Rate Zone: Zone 4-5 (90-95%+ max HR | 180-190+ bpm)\nFocus: Hard effort, recovery between intervals important\n\nCool-down: 1km easy (6:00-6:15/km | 6.0-6.2 mph) - Zone 2\nTotal: ~8.5km'},
    {day:'Wednesday Nov 5',type:'Rest',focus:'Complete Rest',detail:'Recovery day',specifics:'Complete rest day\nRecovery focus: hydration, sleep (8+ hours)\nOptional 20-30min walk\nFoam rolling/stretching (30min)'},
    {day:'Thursday Nov 6',type:'Strength',focus:'Upper Full Body',detail:'Volume increase',specifics:'Warm-up: 10min row easy + mobility\n\nMain Compound (5 sets each - volume increase):\n‚Ä¢ Lat Pulldown (Close Grip): 10 reps @ 40kg (2min rest)\n‚Ä¢ DB Bench Press: 10 reps @ 22kg DBs (2min rest)\n‚Ä¢ T-Bar Row or Cable Row: 10 reps @ 45kg (90sec rest)\n‚Ä¢ Seated DB Shoulder Press: 8 reps @ 14kg DBs (90sec rest)\n\nAccessory (3 sets):\n‚Ä¢ Cable Pullovers: 12 reps @ 25kg\n‚Ä¢ Incline DB Flyes: 12 reps @ 10kg DBs\n‚Ä¢ Single-Arm Cable Row: 10/arm @ 20kg\n\nCarry & Core (4 rounds - increased volume):\n‚Ä¢ Waiter Carry: 50m/arm @ 15kg\n‚Ä¢ Suitcase Carry: 50m/arm @ 28kg\n‚Ä¢ Plank Hold: 45sec\n‚Ä¢ Pallof Press: 12/side @ 15kg'},
    {day:'Friday Nov 7',type:'Running',focus:'Threshold Run',detail:'3x2km @ 4:10/km',specifics:'Warm-up: 2km easy (6:00-6:15/km | 6.0-6.2 mph) - Zone 2\n\nMain Set: 3x2km @ 4:10/km pace (14.4 kph | 8.9 mph), 3min jog recovery\nHeart Rate Zone: Zone 3-4 (80-88% max HR | 160-175 bpm)\nFocus: "Comfortably hard" - can speak short phrases\n\nCool-down: 1km easy (6:00-6:15/km | 6.0-6.2 mph) - Zone 2\nTotal: ~9km'},
    {day:'Saturday Nov 8',type:'Rest',focus:'Active Recovery',detail:'Full rest',specifics:'Complete rest day\n8-9 hours sleep priority\nLight walk or complete rest\nRecovery work (30min)'},
    {day:'Sunday Nov 9',type:'Hybrid',focus:'Hyrox Conditioning',detail:'Women\'s + 20% EMOM',specifics:'Warm-up: 10min easy + dynamics\n\nEMOM Format (Every Minute On the Minute) - 40 minutes:\nMin 1: 250m SkiErg\nMin 2: 25m Sled Push @ 118kg\nMin 3: 250m Row\nMin 4: 25m Sled Pull @ 92kg\nMin 5: 20 Burpee Broad Jumps\nMin 6: 100m Farmers Carry @ 2x20kg\nMin 7: 25 Wall Balls @ 6kg\nMin 8: 50m Sandbag Lunges @ 14kg\nRepeat 5 times through\n\nTarget: Complete within each minute, rest = remaining time\nFocus: Work capacity under time pressure - ALL 8 stations trained'}
  ],
  4: [
    {day:'Monday Nov 10',type:'Strength',focus:'Leg Workout',detail:'Strength focus',specifics:'Warm-up: 10min bike/row + dynamic stretches\n\nMain Strength (4 sets each - strength focus):\n‚Ä¢ Front Squats: 5 reps @ 45-50kg (3min rest)\n‚Ä¢ Deficit Deadlifts: 5 reps @ 70-80kg (3min rest)\n‚Ä¢ Bulgarian Split Squats: 6/leg @ 22kg DBs (2min rest)\n‚Ä¢ Barbell Hip Thrusts: 10 reps @ 60kg (90sec rest)\n\nUnilateral Work (3 sets):\n‚Ä¢ Single-Leg Leg Press: 10/leg @ heavy\n‚Ä¢ Copenhagen Plank: 20sec/side\n‚Ä¢ Cossack Squats: 8/side @ 16kg\n\nCore: 4x(45sec Hollow Hold, 15 Jackknives, 20 Bicycle Crunches)'},
    {day:'Tuesday Nov 11',type:'Running',focus:'Fartlek Run',detail:'45min variable pace',specifics:'Warm-up: 2km easy (6:00-6:15/km | 6.0-6.2 mph) - Zone 2\n\nMain Set - Fartlek (45 minutes continuous):\n‚Ä¢ Alternate: 2min @ 4:30/km (13.3 kph | 8.3 mph) - Zone 3-4 (80-88% max HR)\n‚Ä¢ Then: 2min @ 5:30/km (10.9 kph | 6.8 mph) - Zone 2 (70-75% max HR)\n‚Ä¢ Repeat pattern throughout\n‚Ä¢ No stopping between intervals\n\nCool-down: 1km easy (6:00-6:15/km | 6.0-6.2 mph) - Zone 2\nTotal: ~10-11km\nFocus: Variable pace, race simulation'},
    {day:'Wednesday Nov 12',type:'Rest',focus:'Complete Rest',detail:'Mid-block check',specifics:'Complete rest day\nHydration (3L+), sleep (8-9 hours)\nOptional light walk (20-30min)\nFoam rolling/stretching (30min)\nMid-block check-in: Assess fatigue, performance'},
    {day:'Thursday Nov 13',type:'Strength',focus:'Upper Full Body',detail:'Mixed rep ranges',specifics:'Warm-up: 10min row easy + mobility\n\nMain Compound (4 sets each - mixed rep ranges):\n‚Ä¢ Lat Pulldown (Wide Grip): 8 reps @ 45kg (2-3min rest)\n‚Ä¢ DB Chest Press: 8 reps @ 24kg DBs (2min rest)\n‚Ä¢ Chest-Supported Row Machine: 12 reps @ 45kg (90sec rest)\n‚Ä¢ Machine Shoulder Press: 10 reps @ 25kg (90sec rest)\n\nSuperset Accessory (3 sets):\nA1: Cable Bicep Curls: 12 reps @ 20kg\nA2: Overhead Tricep Extension: 12 reps @ 15kg\nB1: Cable Lateral Raises: 15 reps @ 10kg\nB2: Cable Reverse Flyes: 15 reps @ 10kg\n\nCarry Challenge (1 round for distance):\n‚Ä¢ Max distance Farmer Carry @ 2x28kg\n‚Ä¢ Rest 3min\n‚Ä¢ Max distance Overhead Carry @ 12kg (alternating arms every 25m)'},
    {day:'Friday Nov 14',type:'Running',focus:'Progressive Long',detail:'12km negative split',specifics:'Progressive structure (finish faster than you start):\n‚Ä¢ 3km @ 4:50/km (12.4 kph | 7.7 mph) - Zone 2 (70-75% max HR)\n‚Ä¢ 4km @ 4:35/km (13.1 kph | 8.1 mph) - Zone 3 (75-82% max HR)\n‚Ä¢ 3km @ 4:20/km (13.8 kph | 8.6 mph) - Zone 3-4 (82-88% max HR)\n‚Ä¢ 2km @ 4:10/km (14.4 kph | 8.9 mph) - Zone 4 (88-92% max HR)\n\nTotal: 12km\nFocus: Negative split practice, mental toughness\nHeart rate should gradually climb throughout'},
    {day:'Saturday Nov 15',type:'Rest',focus:'Active Recovery',detail:'Full rest',specifics:'Complete rest day\nRecovery: 8-9 hours sleep\nLight activity or complete rest\nRecovery protocols (30min)'},
    {day:'Sunday Nov 16',type:'Hybrid',focus:'Hyrox Conditioning',detail:'Women\'s + 30% Chipper',specifics:'Warm-up: 10min easy + dynamics\n\nChipper Format (complete all in order, for time):\n‚Ä¢ 1500m SkiErg\n‚Ä¢ 100m Sled Push @ 125kg (4x25m)\n‚Ä¢ 1500m Row\n‚Ä¢ 100m Sled Pull @ 100kg (4x25m)\n‚Ä¢ 120 Burpee Broad Jumps\n‚Ä¢ 400m Farmers Carry @ 2x22kg (2x200m)\n‚Ä¢ 150 Wall Balls @ 6kg\n‚Ä¢ 200m Sandbag Lunges @ 16kg (2x100m)\n\nTarget: 40-50min\nFocus: Mental toughness, pacing strategy'}
  ],
  5: [
    {day:'Monday Nov 17',type:'Strength',focus:'Leg Peak Load',detail:'Peak intensity',specifics:'Warm-up: 10min bike/row + leg swings\n\nMain Strength (3 sets each - peak intensity, lower volume):\n‚Ä¢ Back Squats: 3 reps @ 65-70kg (3-4min rest)\n‚Ä¢ Trap Bar Deadlifts: 3 reps @ 95-105kg (3-4min rest)\n‚Ä¢ Front Rack Reverse Lunges: 5/leg @ 35kg (2min rest)\n\nExplosive Power (4 sets):\n‚Ä¢ Broad Jumps: 5 reps (max distance)\n‚Ä¢ Banded Squat Jumps: 8 reps\n‚Ä¢ Single-Leg Hops: 5/leg\n‚Ä¢ Lateral Bounds: 5/side\n\nFinisher - Time Trial:\n‚Ä¢ 100 Walking Lunges @ 20kg DBs (for time)\n\nCore: 3x(60sec Plank, 20 V-Ups, 15 Windshield Wipers)'},
    {day:'Tuesday Nov 18',type:'Running',focus:'Hill Sprints',detail:'8x60sec uphill',specifics:'Warm-up: 2km easy (6:00-6:15/km | 6.0-6.2 mph) - Zone 2\n\nMain Set - Hill Repeats:\n‚Ä¢ 8x60sec uphill sprint @ max effort\n‚Ä¢ Heart Rate Zone: Zone 5 (95%+ max HR | 190+ bpm)\n‚Ä¢ Walk down recovery (2-3min) - allow HR to drop to Zone 2\n‚Ä¢ Focus on power and form\n\nCool-down: 1km easy (6:00-6:15/km | 6.0-6.2 mph) - Zone 2\nTotal: ~6-7km including warm-up/cool-down\nNEW STIMULUS - Power development'},
    {day:'Wednesday Nov 19',type:'Rest',focus:'Complete Rest',detail:'Recovery priority',specifics:'Complete rest day\nHydration (3L+), sleep (8-9 hours)\nLight walk optional (20-30min)\nRecovery work: foam rolling, stretching (30min)'},
    {day:'Thursday Nov 20',type:'Strength',focus:'Upper Peak',detail:'Peak strength',specifics:'Warm-up: 10min row easy + mobility\n\nMain Compound (3 sets each - peak strength):\n‚Ä¢ Lat Pulldown: 5 reps @ 50kg (3min rest)\n‚Ä¢ Barbell Bench Press: 5 reps @ 35kg (3min rest)\n‚Ä¢ Seated Cable Row: 5 reps @ 55kg (2min rest)\n‚Ä¢ DB Shoulder Press: 5 reps @ 16kg DBs (2min rest)\n\nMetabolic Finisher (2 rounds for time):\n‚Ä¢ 20 Lat Pulldown @ 30kg\n‚Ä¢ 30 Push-Ups (scale to knees if needed)\n‚Ä¢ 40 KB Swings @ 24kg\n‚Ä¢ 50 Wall Balls @ 9kg\n‚Ä¢ Rest 3min between rounds\n\nCarry: 3x100m Farmers Carry @ 2x30kg (heavy)'},
    {day:'Friday Nov 21',type:'Running',focus:'Tempo Long',detail:'12km with tempo',specifics:'Structure:\n‚Ä¢ 2km easy (5:00/km | 12.0 kph | 7.5 mph) - Zone 2 (70-75% max HR)\n‚Ä¢ 8km @ 4:25/km (13.6 kph | 8.4 mph) - Zone 3 (75-82% max HR)\n‚Ä¢ 2km easy (5:00/km | 12.0 kph | 7.5 mph) - Zone 2 (70-75% max HR)\n\nTotal: 12km\nFocus: Aerobic capacity at faster pace, maintain steady HR in Zone 3'},
    {day:'Saturday Nov 22',type:'Rest',focus:'Active Recovery',detail:'Mental prep',specifics:'Complete rest day\nRecovery priority: 8-9 hours sleep\nLight walk or complete rest\nVisualization and mental preparation\nRecovery protocols (30min)'},
    {day:'Sunday Nov 23',type:'Hybrid',focus:'RACE SIMULATION',detail:'Mixed Doubles weights',specifics:'Warm-up: 10min easy + dynamics + practice transitions\n\nFull Race Simulation - Split Station Format:\n‚Ä¢ 1km run @ race effort\n‚Ä¢ 500m SkiErg (then partner does 500m)\n‚Ä¢ 1km run @ race effort\n‚Ä¢ 25m Sled Push @ 152kg (then partner does 25m)\n‚Ä¢ 1km run @ race effort\n‚Ä¢ 25m Sled Pull @ 117kg (then partner does 25m)\n‚Ä¢ 1km run @ race effort\n‚Ä¢ 40 Burpee Broad Jumps (then partner does 40)\n‚Ä¢ 1km run @ race effort\n‚Ä¢ 500m Row (then partner does 500m)\n‚Ä¢ 1km run @ race effort\n‚Ä¢ 100m Farmers Carry @ 2x24kg (then partner does 100m)\n‚Ä¢ 1km run @ race effort\n‚Ä¢ 50m Sandbag Lunges @ 20kg (then partner does 50m)\n‚Ä¢ 1km run @ race effort\n‚Ä¢ 50 Wall Balls @ 9kg (then partner does 50)\n\nTarget: Sub-40min (your portion)\nFocus: RACE DAY DRESS REHEARSAL - practice splitting EVERY station\nPractice: Smooth handoffs, communication, pacing'}
  ],
  6: [
    {day:'Monday Nov 24',type:'Strength',focus:'Leg Reduced',detail:'85% intensity taper',specifics:'Warm-up: 10min bike easy + dynamic stretches\n\nMain Strength (3 sets only, 85% intensity):\n‚Ä¢ Back Squats: 6 reps @ 50kg (2min rest)\n‚Ä¢ Romanian Deadlifts: 8 reps @ 35kg (90sec rest)\n‚Ä¢ Bulgarian Split Squats: 8/leg @ 16kg DBs (90sec rest)\n‚Ä¢ Walking Lunges: 20 total @ 15kg DBs (60sec rest)\n\nPower (2 sets):\n‚Ä¢ Box Jumps: 8 reps @ 60cm\n‚Ä¢ Broad Jumps: 8 reps\n\nCore: 3x(30sec Plank, 15 V-Ups, 20 Russian Twists)'},
    {day:'Tuesday Nov 25',type:'Running',focus:'Threshold Short',detail:'6x400m reduced volume',specifics:'Warm-up: 2km easy (6:00-6:15/km | 6.0-6.2 mph) - Zone 2\n\nMain Set: 6x400m @ 3:30/km pace (17.1 kph | 10.6 mph), 90sec rest\nHeart Rate Zone: Zone 4-5 (90-95% max HR | 180-190 bpm)\nFocus: Sharp and controlled, not max effort\n\nCool-down: 1km easy (6:00-6:15/km | 6.0-6.2 mph) - Zone 2\nTotal: ~6km'},
    {day:'Wednesday Nov 26',type:'Rest',focus:'Complete Rest',detail:'Recovery',specifics:'Complete rest day\nHydration (3L), sleep (8+ hours)\nLight walk (20min) optional\nFoam rolling/stretching (20-30min)'},
    {day:'Thursday Nov 27',type:'Strength',focus:'Upper Light',detail:'70% intensity',specifics:'Warm-up: 10min row easy + mobility\n\nMain Compound (3 sets, 70% intensity):\n‚Ä¢ Lat Pulldown: 8 reps @ 30kg\n‚Ä¢ Push-Ups: 12 reps (on knees if needed)\n‚Ä¢ Cable Row: 10 reps @ 30kg\n‚Ä¢ DB Shoulder Press: 8 @ 10kg DBs\n\nAccessory (2 sets):\n‚Ä¢ Farmer Carry: 100m @ 2x24kg\n‚Ä¢ Face Pulls: 15 reps @ 12kg\n‚Ä¢ KB Swings: 15 reps @ 18kg\n\nCore: 2x(30sec Plank, 15 Leg Raises)'},
    {day:'Friday Nov 28',type:'Running',focus:'Easy Run',detail:'8km conversational',specifics:'8km @ 4:50-5:00/km pace (12.0-12.4 kph | 7.5-7.7 mph)\nHeart Rate Zone: Zone 2 (65-75% max HR | 130-150 bpm)\nFocus: Easy, feel fresh, fully conversational\nTotal: 40-42min'},
    {day:'Saturday Nov 29',type:'Rest',focus:'Active Recovery',detail:'Equipment check',specifics:'Complete rest day\n8-9 hours sleep\nVery light activity or complete rest\nMental preparation\nEquipment check'},
    {day:'Sunday Nov 30',type:'Hybrid',focus:'Light Tech Work',detail:'Mixed Doubles - technique',specifics:'Warm-up: 10min easy + dynamics\n\n2 Rounds For Technique (NOT timed):\n‚Ä¢ 500m SkiErg (70% effort)\n‚Ä¢ 25m Sled Push @ 152kg (mixed doubles weight)\n‚Ä¢ 25m Sled Pull @ 117kg (mixed doubles weight)\n‚Ä¢ 40 Burpee Broad Jumps\n‚Ä¢ 500m Row (70% effort)\n‚Ä¢ 100m Farmers Carry @ 2x24kg (mixed doubles weight)\n‚Ä¢ 50m Sandbag Lunges @ 20kg (mixed doubles weight)\n‚Ä¢ 50 Wall Balls @ 9kg (mixed doubles weight)\n\nTarget: 30-35min - FEEL FRESH\nFocus: Perfect technique on ALL stations, smooth transitions'}
  ],
  7: [
    {day:'Monday Dec 1',type:'Strength',focus:'Activation',detail:'Light 60%',specifics:'Warm-up: 10min bike easy + dynamic stretches\n\nLight Activation (2 sets, 60% intensity):\n‚Ä¢ Squats: 8 reps @ 40kg\n‚Ä¢ RDLs: 8 reps @ 30kg\n‚Ä¢ Walking Lunges: 16 total @ 12kg DBs\n‚Ä¢ Box Jumps: 6 @ 50cm\n\nCore (2 rounds): 30sec Plank, 15 Leg Raises\nTotal: 30min max'},
    {day:'Tuesday Dec 2',type:'Running',focus:'Sharpening',detail:'5x400m quality',specifics:'Warm-up: 2km easy (6:00-6:15/km | 6.0-6.2 mph) - Zone 2\n\nMain Set: 5x400m @ 3:40/km pace (16.4 kph | 10.2 mph), 2min rest\nHeart Rate Zone: Zone 4 (88-92% max HR | 175-185 bpm)\nFocus: Feel sharp, not tired - quality over fatigue\n\nCool-down: 1km easy (6:00-6:15/km | 6.0-6.2 mph) - Zone 2\nTotal: ~5km\nFeel sharp, not tired'},
    {day:'Wednesday Dec 3',type:'Rest',focus:'Complete Rest',detail:'Pre-race rest',specifics:'Complete rest or 15-20min walk only\nHydration: 3L water\nSleep: 8+ hours\nLight stretching (10-15min)'},
    {day:'Thursday Dec 4',type:'Strength',focus:'Activation',detail:'Very light 50%',specifics:'Very Light (2 sets, 50% intensity):\n‚Ä¢ Lat Pulldown: 8 reps @ 25kg\n‚Ä¢ Push-Ups: 10 reps (on knees if needed)\n‚Ä¢ Cable Row: 8 reps @ 20kg\n‚Ä¢ DB Shoulder Press: 6 @ 8kg DBs\n\nStation Touch (technique only):\n‚Ä¢ 250m SkiErg (easy)\n‚Ä¢ 250m Row (easy)\n‚Ä¢ 20 Wall Balls @ 6kg\n‚Ä¢ 50m Farmers Carry @ 2x20kg\n\nTotal: 25min max'},
    {day:'Friday Dec 5',type:'Running',focus:'Race Activation',detail:'Strides + movements',specifics:'Warm-up: 15min easy jog (5:50-6:00/km | 6.2-6.4 mph)\n\nStrides: 4x100m @ 90% (14-15 kph | 8.7-9.3 mph) - smooth, not all-out\n\nQuick movements (feel fresh):\n‚Ä¢ 10 Burpee Broad Jumps\n‚Ä¢ 10 Wall Balls @ 6kg\n‚Ä¢ 10 Box Jumps @ 50cm\n\nCool-down: 5min walk\nTotal: 30min, feel PRIMED'},
    {day:'Saturday Dec 6',type:'Hybrid',focus:'RACE DAY üî•',detail:'Mixed Doubles',specifics:'RACE DAY STRATEGY:\n\nStation Splits: You and partner split EVERY station\n‚Ä¢ SkiErg: Each does 500m of 1000m\n‚Ä¢ Row: Each does 500m of 1000m\n‚Ä¢ Sled Push: Each does 25m of 50m @ 152kg\n‚Ä¢ Sled Pull: Each does 25m of 50m @ 117kg\n‚Ä¢ Burpee Broad Jumps: Each does 40 of 80\n‚Ä¢ Farmers Carry: Each does 100m of 200m @ 2x24kg\n‚Ä¢ Sandbag Lunges: Each does 50m of 100m @ 20kg\n‚Ä¢ Wall Balls: Each does 50 of 100 @ 9kg\n\nTransitions: <10 seconds for handoffs\nPacing: Start controlled, finish strong\nAll-rounder approach: Trust your preparation\n\nüèÜ RACE TIME! üèÜ'},
    {day:'Sunday Dec 7',type:'Rest',focus:'Recovery',detail:'Post-race',specifics:'Complete rest or very light 20min walk\nHydration focus\nCelebrate your race! üéâ'}
  ]
};

const mixedProg={
  1:{focus:'Foundation Phase',intensity:'Low-Moderate',notes:'Women\'s weights (103kg push / 78kg pull). Building aerobic base + technique.',startDate:'2025-10-20'},
  2:{focus:'Foundation Phase',intensity:'Moderate',notes:'Women\'s + 10% (110kg push / 85kg pull). Volume increase.',startDate:'2025-10-27'},
  3:{focus:'Build Phase',intensity:'Moderate-High',notes:'Women\'s + 20% (118kg push / 92kg pull). Plyometrics added.',startDate:'2025-11-03'},
  4:{focus:'Build Phase',intensity:'High',notes:'Women\'s + 30% (125kg push / 100kg pull). Peak volume week.',startDate:'2025-11-10'},
  5:{focus:'Peak Phase',intensity:'Very High',notes:'Mixed Doubles weights (152kg push / 117kg pull). Race simulation!',startDate:'2025-11-17'},
  6:{focus:'Taper Week 1',intensity:'Moderate',notes:'Reduced volume, maintain intensity. Mixed Doubles weights.',startDate:'2025-11-24'},
  7:{focus:'Taper Week 2 - RACE',intensity:'Low',notes:'Light activation only. RACE DAY: Saturday 6 December üî•',startDate:'2025-12-01'}
};

const mensProg={1:{focus:'Base',intensity:'Mod',notes:'Push 160kg / Pull 110kg / 10 walls @ 9kg / Farmers 20kg',startDate:'2025-10-20'},2:{focus:'Strength',intensity:'Mod-High',notes:'Push 170kg / Pull 120kg / 20 walls @ 12kg / Farmers 24kg',startDate:'2025-10-27'},3:{focus:'Intensity',intensity:'High',notes:'Push 170kg / Pull 120kg / 25 walls @ 12kg / Farmers 28kg',startDate:'2025-11-03'},4:{focus:'Race Sim',intensity:'High',notes:'Push 170kg / Pull 120kg (12 reps) / 30 walls @ 12kg',startDate:'2025-11-10'},5:{focus:'PEAK',intensity:'V.High',notes:'PEAK: Push 175kg / Pull 125kg / 35 walls @ 12kg',startDate:'2025-11-17'},6:{focus:'Rehearsal',intensity:'Mod-High',notes:'Push 160kg / Pull 110kg / 25-30 walls (taper)',startDate:'2025-11-24'},7:{focus:'Taper',intensity:'Low',notes:'RACE WEIGHTS! 152kg/102kg. RACE: 6 Dec',startDate:'2025-12-01'}};

const getMensWorkouts=(w)=>{const data={1:[{day:'Mon',type:'Strength',focus:'Lower',detail:'160kg/110kg',specifics:'Sled Push: 5x50m @ 160kg\nRDLs: 3x8 (12kg each)\nSled Pull: 6x50m @ 110kg\nBulgarian: 3x8 (10kg each)'},{day:'Tue',type:'Running',focus:'Easy',detail:'10km',specifics:'10km @ 10.2 km/h (6.34 mph - 5:52/km)\nTotal: 10km'},{day:'Wed',type:'Strength',focus:'Upper',detail:'Farmers 20kg',specifics:'Rows: 4x6 (80-100kg)\nPress: 3x8 (60-80kg)\nSkiErg: 6x250m\nFarmers: 3x40m @ 20kg each'},{day:'Thu',type:'Running',focus:'Tempo',detail:'4x1km',specifics:'4x1km @ 10.5 km/h (6.53mph - 5:43/km)\n90s recovery\nTotal: 10km'},{day:'Fri',type:'Running',focus:'Long',detail:'14km',specifics:'14km @ 10.2 km/h (6.34mph - 5:52/km)\nTotal: 14km'},{day:'Sat',type:'Rest',focus:'Recovery',detail:'Rest',specifics:'Walk\nStretch\nFoam roll'},{day:'Sun',type:'Hybrid',focus:'Circuits',detail:'10 walls @ 9kg',specifics:'2 rounds:\nSled 60kg / Burpees / Sandbag 15kg / Farmers 15kg / 10 walls @ 9kg'}]};return data[w]||data[1];};

const plan=currentUser.plan;
const currentPlan=plan==='mixed'?jadeWeeklyPlans[week]:getMensWorkouts(week);
const currentProgram=plan==='mixed'?mixedProg:mensProg;

const toggleComp=(w,i)=>{
  const k=`${userEmail}-${plan}-${w}-${i}`;
  setComp(p=>({...p,[k]:!p[k]}));
};

const isComp=(w,i)=>comp[`${userEmail}-${plan}-${w}-${i}`]||false;

const getCompletion=(w)=>{
  const t=plan==='mixed'?jadeWeeklyPlans[w]:getMensWorkouts(w);
  let c=0;
  t.forEach((_,i)=>{if(isComp(w,i))c++;});
  return{completed:c,total:t.length,percentage:Math.round((c/t.length)*100)};
};

const getUserWorkouts=()=>workouts[userEmail]||[];

const getStats=()=>{
  const wa=new Date();
  wa.setDate(wa.getDate()-7);
  const ww=getUserWorkouts().filter(w=>new Date(w.date)>=wa);
  return{
    total:ww.length,
    running:ww.filter(w=>w.type==='Running').length,
    strength:ww.filter(w=>w.type==='Strength').length,
    hybrid:ww.filter(w=>w.type==='Hybrid').length
  };
};

const logWorkout=()=>{
  if(!currentWorkout.type)return;
  const newWorkout={...currentWorkout,id:Date.now()};
  setWorkouts(prev=>({
    ...prev,
    [userEmail]:[newWorkout,...(prev[userEmail]||[])]
  }));
  setCurrentWorkout({date:new Date().toISOString().split('T')[0],type:'',duration:'',notes:''});
  setShowLogForm(false);
};

return <div className="min-h-screen bg-black text-white p-4">
  <div className="max-w-6xl mx-auto pb-20">
    <div className="mb-8">
      <div className="flex items-center justify-between mb-4">
        <div className="flex items-center gap-3">
          <Flame s={40} style={{color:'#FF4500'}}/>
          <div>
            <h1 className="text-3xl font-bold">HYROX Training</h1>
            <p className="text-gray-400 text-sm">Welcome back, {currentUser.name}</p>
          </div>
        </div>
        <button onClick={handleLogout} className="flex items-center gap-2 px-4 py-2 bg-gray-800 hover:bg-gray-700 rounded-lg transition">
          <User s={18}/>
          <span className="text-sm">Switch User</span>
        </button>
      </div>
      <div className="bg-white border-2 border-gray-200 rounded-lg p-4">
        <div className="flex items-center gap-3">
          <User s={24} style={{color:'#FF4500'}}/>
          <div>
            <div className="font-bold text-black">{currentUser.name}</div>
            <div className="text-sm text-gray-600">{currentUser.category}</div>
          </div>
        </div>
      </div>
    </div>

    <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
      {(()=>{
        const s=getStats();
        return(<>
          <div className="bg-white border-2 border-gray-200 rounded-lg p-4">
            <div className="text-gray-600 text-sm">This Week</div>
            <div className="text-3xl font-bold" style={{color:'#FF4500'}}>{s.total}</div>
            <div className="text-gray-600 text-xs">Total</div>
          </div>
          <div className="bg-white border-2 border-gray-200 rounded-lg p-4">
            <div className="text-gray-600 text-sm">Running</div>
            <div className="text-3xl font-bold text-black">{s.running}</div>
            <div className="text-gray-600 text-xs">Sessions</div>
          </div>
          <div className="bg-white border-2 border-gray-200 rounded-lg p-4">
            <div className="text-gray-600 text-sm">Strength</div>
            <div className="text-3xl font-bold text-black">{s.strength}</div>
            <div className="text-gray-600 text-xs">Sessions</div>
          </div>
          <div className="bg-white border-2 border-gray-200 rounded-lg p-4">
            <div className="text-gray-600 text-sm">Hybrid</div>
            <div className="text-3xl font-bold text-black">{s.hybrid}</div>
            <div className="text-gray-600 text-xs">Sessions</div>
          </div>
        </>);
      })()}
    </div>

    <div className="flex gap-2 mb-6 border-b-2 border-gray-200 overflow-x-auto">
      {['plan','log','history'].map(t=>{
        const icons={plan:Calendar,log:Plus,history:TrendingUp};
        const I=icons[t];
        const labels={plan:'Plan',log:'Log',history:'History'};
        return <button key={t} onClick={()=>setTab(t)} className={`px-6 py-3 font-semibold whitespace-nowrap ${tab===t?'border-b-2':'text-gray-500'}`} style={tab===t?{borderBottomColor:'#FF4500',color:'#FF4500'}:{}}><I s={18} className="inline mr-2"/>{labels[t]}</button>
      })}
    </div>

    <div className="bg-white border-2 border-gray-200 rounded-lg p-6 text-black">
      {tab==='plan'&&<div>
        <h3 className="text-xl font-bold mb-4">{currentUser.category} - 7 Week Program (Race: 6th December)</h3>
        <div className="flex items-center gap-3 mb-6">
          <button onClick={()=>setWeek(Math.max(1,week-1))} disabled={week===1} className="px-4 py-2 bg-white border-2 border-gray-200 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed text-black">‚Üê</button>
          <div className="flex-1 flex gap-2 overflow-x-auto pb-2">
            {[...Array(7)].map((_,i)=>{
              const w=i+1;
              const c=getCompletion(w);
              const info=currentProgram[w];
              const d=new Date(info.startDate);
              return <button key={w} onClick={()=>setWeek(w)} className={`flex-shrink-0 px-4 py-3 rounded-lg font-semibold transition border-2 ${week===w?'text-white shadow-lg':'bg-white text-black hover:bg-gray-50 border-gray-200'}`} style={week===w?{backgroundColor:'#FF4500',borderColor:'#FF4500'}:{}}><div className="text-sm">Week {w}</div><div className="text-xs opacity-75">{d.toLocaleDateString('en-GB',{day:'numeric',month:'short'})}</div>{c.completed>0&&<div className="text-xs mt-1">{c.percentage}%</div>}</button>
            })}
          </div>
          <button onClick={()=>setWeek(Math.min(7,week+1))} disabled={week===7} className="px-4 py-2 bg-white border-2 border-gray-200 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed text-black">‚Üí</button>
        </div>

        <div className="bg-white border-2 border-gray-200 rounded-lg p-5 mb-6">
          <div className="flex justify-between items-start mb-3">
            <div>
              <h4 className="text-2xl font-bold text-black">Week {week}</h4>
              <div className="text-sm text-gray-600 mt-1">Starting: {new Date(currentProgram[week].startDate).toLocaleDateString('en-GB',{weekday:'long',day:'numeric',month:'long',year:'numeric'})}</div>
            </div>
            {week===7&&<div className="px-4 py-2 rounded-lg font-bold text-sm shadow-lg text-white" style={{backgroundColor:'#FF4500'}}>üèÜ RACE WEEK</div>}
          </div>
          <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4">
            <div><div className="text-sm text-gray-600">Phase</div><div className="text-lg font-semibold text-black">{currentProgram[week].focus}</div></div>
            <div><div className="text-sm text-gray-600">Intensity</div><div className="text-lg font-semibold text-black">{currentProgram[week].intensity}</div></div>
            <div><div className="text-sm text-gray-600">Completion</div><div className="text-lg font-semibold text-black">{getCompletion(week).completed}/{getCompletion(week).total} sessions</div></div>
          </div>
          <div className="mt-3 text-sm text-gray-700 italic">{currentProgram[week].notes}</div>
        </div>

        <div className="space-y-3">
          {currentPlan.map((day,i)=><WorkoutCard key={`${week}-${i}`} day={day} isComplete={isComp(week,i)} onToggle={()=>toggleComp(week,i)}/>)}
        </div>
      </div>}

      {tab==='log'&&<div>
        {!showLogForm?<button onClick={()=>setShowLogForm(true)} className="w-full py-8 border-2 border-dashed rounded-lg" style={{borderColor:'#FF4500',backgroundColor:'#FFF'}}><Plus s={32} style={{color:'#FF4500'}}/><div className="text-xl font-semibold" style={{color:'#FF4500'}}>Log Workout</div></button>:<div className="space-y-4">
          <h3 className="text-xl font-bold text-black">Log Workout</h3>
          <div><label className="block text-sm font-medium mb-2 text-black">Date</label><input type="date" value={currentWorkout.date} onChange={e=>setCurrentWorkout({...currentWorkout,date:e.target.value})} className="w-full bg-white text-black rounded px-4 py-2 border-2 border-gray-200"/></div>
          <div><label className="block text-sm font-medium mb-2 text-black">Type</label><select value={currentWorkout.type} onChange={e=>setCurrentWorkout({...currentWorkout,type:e.target.value})} className="w-full bg-white text-black rounded px-4 py-2 border-2 border-gray-200"><option value="">Select...</option><option value="Running">Running</option><option value="Strength">Strength</option><option value="Hybrid">Hybrid</option><option value="Rest">Rest</option></select></div>
          <div><label className="block text-sm font-medium mb-2 text-black">Duration (min)</label><input type="number" value={currentWorkout.duration} onChange={e=>setCurrentWorkout({...currentWorkout,duration:e.target.value})} placeholder="60" className="w-full bg-white text-black rounded px-4 py-2 border-2 border-gray-200"/></div>
          <div><label className="block text-sm font-medium mb-2 text-black">Notes</label><textarea value={currentWorkout.notes} onChange={e=>setCurrentWorkout({...currentWorkout,notes:e.target.value})} placeholder="How did it feel?" className="w-full bg-white text-black rounded px-4 py-2 h-24 border-2 border-gray-200"/></div>
          <div className="flex gap-3"><button onClick={logWorkout} className="flex-1 px-6 py-3 rounded-lg font-semibold text-white" style={{backgroundColor:'#FF4500'}}>Save</button><button onClick={()=>setShowLogForm(false)} className="px-6 py-3 bg-white border-2 border-gray-300 rounded-lg font-semibold text-black">Cancel</button></div>
        </div>}
      </div>}

      {tab==='history'&&<div>
        <h3 className="text-xl font-bold mb-4 text-black">History</h3>
        {getUserWorkouts().length===0?<div className="text-center py-12 text-gray-400"><Clock s={48} className="mx-auto mb-4 opacity-50"/><p>No workouts logged</p></div>:<div className="space-y-3">{getUserWorkouts().map(w=><div key={w.id} className="bg-white border-2 rounded-lg p-4"><div className="flex justify-between mb-2"><div><div className="font-bold text-black">{w.type}</div><div className="text-sm text-gray-600">{new Date(w.date).toLocaleDateString('en-GB',{weekday:'short',day:'numeric',month:'short'})}</div></div><div className="text-sm font-semibold text-black">{w.duration} min</div></div>{w.notes&&<div className="text-sm text-gray-700 mt-2 pt-2 border-t border-gray-300">{w.notes}</div>}</div>)}</div>}
      </div>}
    </div>
  </div>
</div>
}

ReactDOM.render(<App/>,document.getElementById('root'));
</script>
</body>
</html>
